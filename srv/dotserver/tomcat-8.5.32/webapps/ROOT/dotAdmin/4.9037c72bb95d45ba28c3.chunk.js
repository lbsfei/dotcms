webpackJsonp([4],{"1/8Y":function(e,t,o){(e.exports=o("rP7Y")(!1)).push([e.i,":root{--color-background:#3a3847;--color-main:#c336e5;--color-main_mod:#d369ec;--color-main_rgb:195,54,229;--color-sec:#54428e;--color-sec_rgb:84,66,142}:host{display:-webkit-box;display:-ms-flexbox;display:flex;padding-right:80px;min-height:100%}:host>dot-edit-page-nav{position:fixed;height:100%;right:0;top:60px}",""]),e.exports=e.exports.toString()},LIfD:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("pRBB"),a=o("fhyG"),i=o("/oeL"),r=o("qbdv"),c=o("BkNc"),s=o("AP4T"),l=o("TO51"),d=o("GROE"),p=o("p9yO"),u=o("I3wY"),f=o("Ga45"),g=o("L8gZ"),y=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},b=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(){function e(e,t,o,n,a){var i=this;this.route=e,this.dotContentletEditorService=t,this.dotPageStateService=o,this.dotRouterService=n,this.dotMessageService=a,this.destroy$=new l.Subject,this.customEventsHandler||(this.customEventsHandler={"save-page":function(e){e.detail.payload&&(i.pageUrl=e.detail.payload.htmlPageReferer.split("?")[0])},"deleted-page":function(){i.dotRouterService.goToSiteBrowser()}})}return e.prototype.ngOnInit=function(){this.pageState=this.route.data.pluck("content"),this.pageUrl=this.route.snapshot.queryParams.url,this.subscribeIframeCloseAction(),this.dotMessageService.getMessages(["editpage.toolbar.nav.properties"])},e.prototype.ngOnDestroy=function(){this.destroy$.next(!0),this.destroy$.complete()},e.prototype.onCustomEvent=function(e){this.customEventsHandler[e.detail.name]&&this.customEventsHandler[e.detail.name](e)},e.prototype.subscribeIframeCloseAction=function(){var e=this;this.dotContentletEditorService.close$.pipe(Object(d.takeUntil)(this.destroy$)).subscribe(function(){e.pageState.pipe(Object(d.take)(1)).subscribe(function(t){e.pageUrl!==e.route.snapshot.queryParams.url?e.dotRouterService.goToEditPage(e.pageUrl,t.page.languageId.toString()):e.dotPageStateService.reload(e.route.snapshot.queryParams.url)})}),this.dotPageStateService.reload$.pipe(Object(d.takeUntil)(this.destroy$)).subscribe(function(t){e.pageState=s.a.of(t)})},e}();h=y([Object(i.Component)({selector:"dot-edit-page-main",template:o("fn1E"),styles:[o("1/8Y")]}),b("design:paramtypes",["function"==typeof(m="undefined"!=typeof c.ActivatedRoute&&c.ActivatedRoute)&&m||Object,"function"==typeof(v="undefined"!=typeof f.a&&f.a)&&v||Object,"function"==typeof(O="undefined"!=typeof p.a&&p.a)&&O||Object,"function"==typeof(j="undefined"!=typeof g.a&&g.a)&&j||Object,"function"==typeof(_="undefined"!=typeof u.a&&u.a)&&_||Object])],h);var m,v,O,j,_,S=o("XFcD"),x=o("CPp0"),R=o("rDdN"),k=o("gMXx"),E=o("CLLy"),P=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},w=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},M=function(){function e(e,t,o,n){this.dotHttpErrorManagerService=e,this.dotPageStateService=t,this.dotRouterService=o,this.dotEditPageDataService=n}return e.prototype.resolve=function(e){var t=this,o=this.dotEditPageDataService.getAndClean();return o?s.a.of(o):this.dotPageStateService.get({url:e.queryParams.url,viewAs:{language_id:e.queryParams.language_id}}).pipe(Object(d.take)(1),Object(d.switchMap)(function(o){return"layout"===e.children[0].url[0].path?t.checkUserCanGoToLayout(o):s.a.of(o)}),Object(d.catchError)(function(e){return t.errorHandler(e).pipe(Object(d.map)(function(){return null}))}))},e.prototype.checkUserCanGoToLayout=function(e){return e.page.canEdit?e.layout?s.a.of(e):s.a.throw(new R.D(new x.i({body:{},status:R.y.FORBIDDEN,headers:new x.a({"error-key":"dotcms.api.error.license.required"}),url:"",merge:null}))):s.a.throw(new R.D(new x.i({body:{},status:R.y.FORBIDDEN,headers:null,url:"",merge:null})))},e.prototype.errorHandler=function(e){var t=this;return this.dotHttpErrorManagerService.handle(e).pipe(Object(d.tap)(function(e){e.redirected||t.dotRouterService.goToSiteBrowser()}))},e}();M=P([Object(i.Injectable)(),w("design:paramtypes",["function"==typeof(C="undefined"!=typeof k.a&&k.a)&&C||Object,"function"==typeof(D="undefined"!=typeof p.a&&p.a)&&D||Object,"function"==typeof(L="undefined"!=typeof g.a&&g.a)&&L||Object,"function"==typeof(I="undefined"!=typeof E.a&&E.a)&&I||Object])],M);var C,D,L,I,T=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},N=[{component:h,path:"",resolve:{content:M},runGuardsAndResolvers:"always",children:[{path:"",redirectTo:"./content"},{loadChildren:"app/portlets/dot-edit-page/content/dot-edit-content.module#DotEditContentModule",path:"content"},{loadChildren:"app/portlets/dot-edit-page/layout/dot-edit-layout.module#DotEditLayoutModule",path:"layout"}]},{component:S.a,path:"layout/template/:id/:tabName"}],q=function(){return function(){}}();q=T([Object(i.NgModule)({exports:[c.RouterModule],imports:[c.RouterModule.forChild(N)]})],q);var A=o("6OCn"),U=o("UvuA"),H=o("W69s"),B=o("nC0h"),G=o("5S14"),$=o("qqDE"),Y=o("wP3s"),F=o("xrDH"),X=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},V=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},z=function(){function e(e,t,o,n){this.dotLicenseService=e,this.dotContentletEditorService=t,this.dotMessageService=o,this.route=n}return e.prototype.ngOnChanges=function(e){this.layoutChanged(e)&&(this.model=this.model?s.a.of(this.getNavItems(this.pageState,this.isEnterpriseLicense)):this.loadNavItems())},e.prototype.layoutChanged=function(e){return!!e.pageState.firstChange||!F.isEqual(e.pageState.currentValue.layout,e.pageState.previousValue.layout)},e.prototype.loadNavItems=function(){var e=this;return this.dotMessageService.getMessages(["editpage.toolbar.nav.content","editpage.toolbar.nav.properties","editpage.toolbar.nav.layout","editpage.toolbar.nav.code","editpage.toolbar.nav.license.enterprise.only","editpage.toolbar.nav.layout.advance.disabled"]).pipe(Object(Y.a)(function(){return e.dotLicenseService.isEnterprise()}),Object($.a)(function(t){return e.isEnterpriseLicense=t,e.getNavItems(e.pageState,t)}))},e.prototype.canGoToLayout=function(e){return e.page.canEdit&&e.template.drawed},e.prototype.getNavItems=function(e,t){var o=this;return[{needsEntepriseLicense:!1,disabled:!1,icon:"fa fa-file-text",label:this.dotMessageService.get("editpage.toolbar.nav.content"),link:"content"},this.getTemplateNavItem(e,t),{needsEntepriseLicense:!1,disabled:!1,icon:"fa fa-plus",label:this.dotMessageService.get("editpage.toolbar.nav.properties"),action:function(e){o.dotContentletEditorService.edit({data:{inode:e}})}}]},e.prototype.getTemplateNavItem=function(e,t){return{needsEntepriseLicense:!t,disabled:!this.canGoToLayout(e),icon:"fa fa-th-large",label:this.getTemplateItemLabel(e.template),link:"layout",tooltip:e.template.drawed?null:this.dotMessageService.get("editpage.toolbar.nav.layout.advance.disabled")}},e.prototype.getTemplateItemLabel=function(e){return this.dotMessageService.get("editpage.toolbar.nav.layout")},e}();X([Object(i.Input)(),V("design:type","function"==typeof(W="undefined"!=typeof B.a&&B.a)&&W||Object)],z.prototype,"pageState",void 0),z=X([Object(i.Component)({selector:"dot-edit-page-nav",template:o("k9tk"),styles:[o("XE3/")]}),V("design:paramtypes",["function"==typeof(J="undefined"!=typeof G.a&&G.a)&&J||Object,"function"==typeof(Z="undefined"!=typeof f.a&&f.a)&&Z||Object,"function"==typeof(K="undefined"!=typeof u.a&&u.a)&&K||Object,"function"==typeof(Q="undefined"!=typeof c.ActivatedRoute&&c.ActivatedRoute)&&Q||Object])],z);var W,J,Z,K,Q,ee=o("LUBl"),te=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},oe=function(){return function(){}}();oe=te([Object(i.NgModule)({imports:[r.CommonModule,c.RouterModule,ee.TooltipModule],declarations:[z],exports:[z],providers:[]})],oe);var ne=o("7n+s"),ae=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},ie=function(){return function(){}}();ie=ae([Object(i.NgModule)({imports:[r.CommonModule,c.RouterModule,oe,ne.a],providers:[R.m],declarations:[h]})],ie);var re=o("9W7s"),ce=o("uFYV");o.d(t,"DotEditPageModule",function(){return le});var se=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},le=function(){return function(){}}();le=se([Object(i.NgModule)({imports:[r.CommonModule,A.DotEditLayoutModule,ie,q,U.a,ce.a],declarations:[],providers:[n.a,M,p.a,re.a,a.a,H.a,E.a]})],le)},"XE3/":function(e,t,o){(e.exports=o("rP7Y")(!1)).push([e.i,":root{--color-background:#3a3847;--color-main:#c336e5;--color-main_mod:#d369ec;--color-main_rgb:195,54,229;--color-sec:#54428e;--color-sec_rgb:84,66,142}:host{background-color:#fff;border-left:1px solid #ecedee;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-negative:0;flex-shrink:0;-webkit-box-ordinal-group:3;-ms-flex-order:2;order:2;width:80px}.edit-page-nav{margin:0;padding:0;list-style:none;width:100%}.edit-page-nav__item{-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#3a3847;color:var(--color-background);display:block;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;font-size:11px;height:80px;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;text-decoration:none;text-transform:uppercase;transition:background-color .1s ease-in}.edit-page-nav__item:hover{background-color:#ecedee}.edit-page-nav__item>.fa{font-size:1.25em;margin-bottom:8px}.edit-page-nav__item--disabled,.edit-page-nav__item--disabled:hover{background-color:transparent;opacity:.4;cursor:not-allowed}.edit-page-nav__item--active{background-color:#3a3847;background-color:var(--color-background);color:#fff;pointer-events:none}",""]),e.exports=e.exports.toString()},fn1E:function(e,t){e.exports='<router-outlet></router-outlet>\n<dot-edit-page-nav [pageState]="pageState | async"></dot-edit-page-nav>\n<dot-edit-contentlet (custom)="onCustomEvent($event)"></dot-edit-contentlet>'},k9tk:function(e,t){e.exports='<ul class="edit-page-nav">\n    <li *ngFor="let item of model | async">\n        <div *ngIf="!item.needsEntepriseLicense;then basic else enterprise"></div>\n        <ng-template #basic>\n            <a class="edit-page-nav__item"\n                pTooltip="{{ item.tooltip }}"\n                [ngClass]="{\'edit-page-nav__item--disabled\': item.disabled, \'edit-page-nav__item--active\': item.link === this.route.snapshot.firstChild.url[0].path}"\n                [routerLink]="!item.disabled && item.link ? [\'./\' + item.link] : null"\n                (click)="item.action ? item.action(pageState.page.inode) : \'\'"\n                [queryParams]="route.queryParams | async">\n                <i class="{{ item.icon }}"></i>\n                <span class="edit-page-nav__item-text">{{ item.label }}</span>\n            </a>\n        </ng-template>\n        <ng-template #enterprise>\n            <span pTooltip="{{ dotMessageService.get(\'editpage.toolbar.nav.license.enterprise.only\') }}" tooltipPosition="left" class="edit-page-nav__item edit-page-nav__item--disabled">\n                <i class="{{ item.icon }}"></i>\n                <span class="edit-page-nav__item-text">{{ item.label }}</span>\n            </span>\n        </ng-template>\n    </li>\n</ul>\n'}});