webpackJsonp([0],{"/FB0":function(e,t,i){(e.exports=i("rP7Y")(!1)).push([e.i,":root{--color-background:#3a3847;--color-main:#c336e5;--color-main_mod:#d369ec;--color-main_rgb:195,54,229;--color-sec:#54428e;--color-sec_rgb:84,66,142}::ng-deep dot-site-selector .site-selector__title,::ng-deep dot-site-selector dot-searchable-dropdown .ui-button{font-size:16px;min-width:180px}::ng-deep .ui-datagrid-content{width:1008px;height:512px}::ng-deep .ui-datagrid-content .ui-g{margin:0}::ng-deep .ui-datagrid-content .ui-widget-content.ui-g-12{text-align:center;font-size:16px;margin-top:40px}.dot-themes-container{margin-top:16px}.dot-theme-search-box{display:inline-block;width:200px;margin-left:24px;position:relative}.dot-theme-search-box input{font-size:16px}.dot-theme-item{margin:16px 16px 0 0;width:240px;height:240px;background:#ecedee;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:24px 16px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;cursor:pointer;border-radius:4px}.dot-theme-item svg{fill:#7e7a86;border-radius:6px}.dot-theme-item.active,.dot-theme-item:hover{box-shadow:0 10px 20px rgba(0,0,0,.19),0 6px 6px rgba(0,0,0,.23);background:#fff}.dot-theme-item:nth-child(4n){margin-right:0}.dot-theme-item__name{padding-top:24px;font-size:18px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center;width:100%;line-height:20px}.dot-theme-iteme__image{border-radius:6px}",""]),e.exports=e.exports.toString()},"04QJ":function(e,t,i){(e.exports=i("rP7Y")(!1)).push([e.i,":root{--color-background:#3a3847;--color-main:#c336e5;--color-main_mod:#d369ec;--color-main_rgb:195,54,229;--color-sec:#54428e;--color-sec_rgb:84,66,142}:host{right:8px;top:8px}",""]),e.exports=e.exports.toString()},"4sTJ":function(e,t,i){(e.exports=i("rP7Y")(!1)).push([e.i,":root{--color-background:#3a3847;--color-main:#c336e5;--color-main_mod:#d369ec;--color-main_rgb:195,54,229;--color-sec:#54428e;--color-sec_rgb:84,66,142}:host{display:block}.container-selector__list{margin:0;overflow-x:hidden;padding:0}.container-selector__list-item{margin:0;padding:0;list-style:none;border-top:1px solid #ecedee;color:#0a0725;font-size:13px;overflow:hidden;padding:4px 0;text-overflow:ellipsis;white-space:nowrap}.container-selector__list-item:first-child{border-top:none}",""]),e.exports=e.exports.toString()},"6OCn":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i("qbdv"),n=i("/oeL"),r=i("BkNc"),s=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e){this.route=e}return e.prototype.ngOnInit=function(){this.pageState=this.route.parent.parent.data.pluck("content"),this.isAdvancedTemplate=this.pageState.map(function(e){return e.template&&!e.template.drawed})},e}();c=s([Object(n.Component)({selector:"dot-edit-layout",template:i("CgDJ"),styles:[i("qtEl")]}),a("design:paramtypes",["function"==typeof(l="undefined"!=typeof r.ActivatedRoute&&r.ActivatedRoute)&&l||Object])],c);var l,d=i("bm2B"),h=i("LUBl"),p=i("GxOa"),u=i("nC0h"),g=i("rtkY"),f=i("fhyG"),m=i("I3wY"),y=i("W69s"),_=i("XZ0j"),v=i("xrDH"),b=12,x={fixed:!0,sizex:3,maxCols:12,maxRows:1},w=[{config:Object.assign({},{fixed:!0,sizex:12,maxCols:12,maxRows:1,col:1,row:1}),containers:[]}],R=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},S=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},E=function(){function e(e){this.templateContainersCacheService=e}return e.prototype.getDotLayoutGridBox=function(e){var t=this,i=[];return e.rows.forEach(function(e,o){e.columns.forEach(function(e){i.push({containers:e.containers.map(function(e){return{container:t.templateContainersCacheService.get(e.identifier),uuid:e.uuid}}),config:Object.assign({},x,{sizex:e.width,col:e.leftOffset,row:o+1})})})}),i},e.prototype.getDotLayoutBody=function(e){return{rows:v.chain(e).sortBy("config.row").sortBy("config.col").groupBy("config.row").values().map(this.getLayoutRowFromLayoutGridBoxes).value()}},e.prototype.cleanupDotLayoutBody=function(e){return this.getDotLayoutBody(this.getDotLayoutGridBox(e))},e.prototype.getDotLayoutSidebar=function(e){var t=this;return e.map(function(e){return{container:t.templateContainersCacheService.get(e.identifier),uuid:e.uuid?e.uuid:""}})},e.prototype.getLayoutRowFromLayoutGridBoxes=function(e){return{columns:e.map(function(e){return{leftOffset:e.config.col,width:e.config.sizex,containers:e.containers.map(function(e){return{identifier:e.container.identifier,uuid:e.uuid}})}})}},e}();E=R([Object(n.Injectable)(),S("design:paramtypes",["function"==typeof(O="undefined"!=typeof y.a&&y.a)&&O||Object])],E);var O,C=i("miw3"),M=i("WEna"),j=i("L8gZ"),P=i("rDdN"),z=i("CPp0"),G=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},D=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},k=function(){function e(e){this.coreWebService=e}return e.prototype.get=function(e){return this.coreWebService.requestView({method:z.g.Get,url:"v1/themes/id/"+e}).pluck("entity")},e}();k=G([Object(n.Injectable)(),D("design:paramtypes",["function"==typeof(I="undefined"!=typeof P.e&&P.e)&&I||Object])],k);var I,T=i("gMXx"),L=i("4HZJ"),B=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},H=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},W=function(){function e(e,t,i,o,n,r,s,a,c,l,d,h){this.dotEditLayoutService=e,this.dotEventsService=t,this.dotGlobalMessageService=i,this.dotDialogService=o,this.fb=n,this.pageViewService=r,this.templateContainersCacheService=s,this.loginService=a,this.dotRouterService=c,this.dotMessageService=l,this.dotThemesService=d,this.dotHttpErrorManagerService=h,this.editTemplate=!1,this.isModelUpdated=!1,this.themeDialogVisibility=!1,this.showTemplateLayoutSelectionDialog=!1}return e.prototype.ngOnInit=function(){this.dotMessageService.getMessages(["common.validation.name.error.required","dot.common.message.saved","dot.common.message.saving","dot.common.cancel","editpage.layout.dialog.edit.page","editpage.layout.dialog.edit.template","editpage.layout.dialog.header","editpage.layout.dialog.info","editpage.layout.toolbar.action.save","editpage.layout.toolbar.save.template","editpage.layout.toolbar.template.name","editpage.layout.theme.button.label","org.dotcms.frontend.content.submission.not.proper.permissions"]).subscribe(),this.setupLayout(),this.shouldShowDialog()?this.showTemplateLayoutDialog():this.setEditLayoutMode()},e.prototype.isLayout=function(){return!this.pageState.template||this.pageState.template.anonymous},e.prototype.onCancel=function(){this.dotRouterService.goToEditPage(this.pageState.page.pageURI)},e.prototype.saveAsTemplateHandleChange=function(e){var t=this,i=this.form.get("title");i.markAsUntouched(),i.markAsPristine(),this.saveAsTemplate=e,this.saveAsTemplate?(i.setValidators(d.Validators.required),setTimeout(function(){t.templateName.nativeElement.focus()},0)):(i.setValidators(null),null===this.initialFormValue.title&&i.setValue(null)),i.updateValueAndValidity()},e.prototype.saveLayout=function(){var e=this;this.dotGlobalMessageService.loading(this.dotMessageService.get("dot.common.message.saving"));var t=this.form.value;this.pageViewService.save(this.pageState.page.identifier,t).subscribe(function(t){e.dotGlobalMessageService.display(e.dotMessageService.get("dot.common.message.saved")),e.setupLayout(new u.a(e.loginService.auth.user,t))},function(t){e.dotGlobalMessageService.error(t.response.statusText)})},e.prototype.setEditLayoutMode=function(){this.initialFormValue.title=null,this.form.get("title").setValue(null),this.pageState.template&&(this.pageState.template.anonymous=!0)},e.prototype.changeThemeHandler=function(e){this.currentTheme=e,this.form.get("themeId").setValue(e.inode),this.themeDialogVisibility=!1},e.prototype.closeThemeDialog=function(){this.themeDialogVisibility=!1},e.prototype.setupLayout=function(e){var t=this;e&&(this.pageState.dotRenderedPageState=e),this.templateContainersCacheService.set(this.pageState.containers),this.initForm(),this.saveAsTemplateHandleChange(!1),this.dotThemesService.get(this.form.get("themeId").value).subscribe(function(e){t.currentTheme=e},function(e){return t.errorHandler(e)}),this.form.get("layout.sidebar").valueChanges.subscribe(function(){t.dotEventsService.notify("layout-sidebar-change")})},e.prototype.initForm=function(){var e=this;this.form=this.fb.group({title:this.isLayout()?null:this.pageState.template.title,themeId:this.pageState.template.theme,layout:this.fb.group({body:this.dotEditLayoutService.cleanupDotLayoutBody(this.pageState.layout.body)||{},header:this.pageState.layout.header,footer:this.pageState.layout.footer,sidebar:this.createSidebarForm()})}),this.initialFormValue=v.cloneDeep(this.form.value),this.isModelUpdated=!1,this.form.valueChanges.subscribe(function(){e.isModelUpdated=!v.isEqual(e.form.value,e.initialFormValue)})},e.prototype.showTemplateLayoutDialog=function(){var e=this;this.dotMessageService.getMessages(["editpage.layout.dialog.header","editpage.layout.dialog.info","editpage.layout.dialog.edit.page","editpage.layout.dialog.edit.template"]).subscribe(function(){e.dotDialogService.alert({header:e.dotMessageService.get("editpage.layout.dialog.header"),message:e.dotMessageService.get("editpage.layout.dialog.info",e.pageState.template.name),footerLabel:{accept:e.dotMessageService.get("editpage.layout.dialog.edit.page"),reject:e.dotMessageService.get("editpage.layout.dialog.edit.template")},accept:function(){e.setEditLayoutMode()}})})},e.prototype.createSidebarForm=function(){return{location:this.pageState.layout.sidebar?this.pageState.layout.sidebar.location:"",containers:this.pageState.layout.sidebar?this.pageState.layout.sidebar.containers:[],width:this.pageState.layout.sidebar?this.pageState.layout.sidebar.width:"small"}},e.prototype.shouldShowDialog=function(){return this.editTemplate&&!this.isLayout()&&this.pageState.template.canEdit},e.prototype.errorHandler=function(e){var t=this;return this.dotHttpErrorManagerService.handle(e).pipe(Object(L.tap)(function(i){i.redirected||t.dotRouterService.goToSiteBrowser(),t.currentTheme=403===e.response.status?null:t.currentTheme}))},e}();B([Object(n.ViewChild)("templateName"),H("design:type","function"==typeof(A="undefined"!=typeof n.ElementRef&&n.ElementRef)&&A||Object)],W.prototype,"templateName",void 0),B([Object(n.Input)(),H("design:type",Object)],W.prototype,"editTemplate",void 0),B([Object(n.Input)(),H("design:type","function"==typeof(V="undefined"!=typeof u.a&&u.a)&&V||Object)],W.prototype,"pageState",void 0),W=B([Object(n.Component)({selector:"dot-edit-layout-designer",template:i("Avot"),styles:[i("xwG8")]}),H("design:paramtypes",["function"==typeof(F="undefined"!=typeof E&&E)&&F||Object,"function"==typeof(N="undefined"!=typeof _.a&&_.a)&&N||Object,"function"==typeof(U="undefined"!=typeof C.a&&C.a)&&U||Object,"function"==typeof(Y="undefined"!=typeof g.a&&g.a)&&Y||Object,"function"==typeof(X="undefined"!=typeof d.FormBuilder&&d.FormBuilder)&&X||Object,"function"==typeof($="undefined"!=typeof f.a&&f.a)&&$||Object,"function"==typeof(q="undefined"!=typeof y.a&&y.a)&&q||Object,"function"==typeof(Z="undefined"!=typeof M.a&&M.a)&&Z||Object,"function"==typeof(J="undefined"!=typeof j.a&&j.a)&&J||Object,"function"==typeof(K="undefined"!=typeof m.a&&m.a)&&K||Object,"function"==typeof(Q="undefined"!=typeof k&&k)&&Q||Object,"function"==typeof(ee="undefined"!=typeof T.a&&T.a)&&ee||Object])],W);var A,V,F,N,U,Y,X,$,q,Z,J,K,Q,ee,te=function(){function e(e,t){this._ngEl=e,this._renderer=t}return e.prototype.registerGrid=function(e){this._ngGrid=e},e.prototype.ngOnInit=function(){this._renderer.setElementClass(this._ngEl.nativeElement,"grid-placeholder",!0),this._ngGrid.autoStyle&&this._renderer.setElementStyle(this._ngEl.nativeElement,"position","absolute")},e.prototype.setSize=function(e){this._size=e,this._recalculateDimensions()},e.prototype.setGridPosition=function(e){this._position=e,this._recalculatePosition()},e.prototype.setCascadeMode=function(e){switch(this._cascadeMode=e,e){case"up":case"left":default:this._renderer.setElementStyle(this._ngEl.nativeElement,"left","0px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"top","0px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"right",null),this._renderer.setElementStyle(this._ngEl.nativeElement,"bottom",null);break;case"right":this._renderer.setElementStyle(this._ngEl.nativeElement,"right","0px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"top","0px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"left",null),this._renderer.setElementStyle(this._ngEl.nativeElement,"bottom",null);break;case"down":this._renderer.setElementStyle(this._ngEl.nativeElement,"left","0px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"bottom","0px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"right",null),this._renderer.setElementStyle(this._ngEl.nativeElement,"top",null)}},e.prototype._setDimensions=function(e,t){this._renderer.setElementStyle(this._ngEl.nativeElement,"width",e+"px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"height",t+"px")},e.prototype._setPosition=function(e,t){switch(this._cascadeMode){case"up":case"left":default:this._renderer.setElementStyle(this._ngEl.nativeElement,"transform","translate("+e+"px, "+t+"px)");break;case"right":this._renderer.setElementStyle(this._ngEl.nativeElement,"transform","translate("+-e+"px, "+t+"px)");break;case"down":this._renderer.setElementStyle(this._ngEl.nativeElement,"transform","translate("+e+"px, "+-t+"px)")}},e.prototype._recalculatePosition=function(){var e=(this._ngGrid.colWidth+this._ngGrid.marginLeft+this._ngGrid.marginRight)*(this._position.col-1)+this._ngGrid.marginLeft+this._ngGrid.screenMargin,t=(this._ngGrid.rowHeight+this._ngGrid.marginTop+this._ngGrid.marginBottom)*(this._position.row-1)+this._ngGrid.marginTop;this._setPosition(e,t)},e.prototype._recalculateDimensions=function(){var e=this._ngGrid.colWidth*this._size.x+(this._ngGrid.marginLeft+this._ngGrid.marginRight)*(this._size.x-1),t=this._ngGrid.rowHeight*this._size.y+(this._ngGrid.marginTop+this._ngGrid.marginBottom)*(this._size.y-1);this._setDimensions(e,t)},e.decorators=[{type:n.Component,args:[{selector:"ng-grid-placeholder",template:""}]}],e.ctorParameters=function(){return[{type:n.ElementRef},{type:n.Renderer}]},e}(),ie=function(){function e(t,i,o,r,s){this._differs=t,this._ngEl=i,this._renderer=o,this.componentFactoryResolver=r,this._containerRef=s,this.onDragStart=new n.EventEmitter,this.onDrag=new n.EventEmitter,this.onDragStop=new n.EventEmitter,this.onResizeStart=new n.EventEmitter,this.onResize=new n.EventEmitter,this.onResizeStop=new n.EventEmitter,this.onItemChange=new n.EventEmitter,this.colWidth=250,this.rowHeight=250,this.minCols=1,this.minRows=1,this.marginTop=10,this.marginRight=10,this.marginBottom=10,this.marginLeft=10,this.screenMargin=0,this.isDragging=!1,this.isResizing=!1,this.autoStyle=!0,this.resizeEnable=!0,this.dragEnable=!0,this.cascade="up",this.minWidth=100,this.minHeight=100,this._items=[],this._draggingItem=null,this._resizingItem=null,this._resizeDirection=null,this._itemGrid={},this._maxCols=0,this._maxRows=0,this._visibleCols=0,this._visibleRows=0,this._setWidth=250,this._setHeight=250,this._posOffset=null,this._adding=!1,this._placeholderRef=null,this._fixToGrid=!1,this._autoResize=!1,this._destroyed=!1,this._maintainRatio=!1,this._preferNew=!1,this._zoomOnDrag=!1,this._limitToScreen=!1,this._centerToScreen=!1,this._curMaxRow=0,this._curMaxCol=0,this._dragReady=!1,this._resizeReady=!1,this._elementBasedDynamicRowHeight=!1,this._config=e.CONST_DEFAULT_CONFIG}return Object.defineProperty(e.prototype,"config",{set:function(e){this.setConfig(e),null==this._differ&&null!=e&&(this._differ=this._differs.find(this._config).create(null))},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this._renderer.setElementClass(this._ngEl.nativeElement,"grid",!0),this.autoStyle&&this._renderer.setElementStyle(this._ngEl.nativeElement,"position","relative"),this.setConfig(this._config)},e.prototype.ngOnDestroy=function(){this._destroyed=!0},e.prototype.setConfig=function(e){this._config=e;var t=!1;for(var i in e){var o=e[i],n=o?parseInt(o):0;switch(i){case"margins":this.setMargins(o);break;case"col_width":this.colWidth=Math.max(n,1);break;case"row_height":this.rowHeight=Math.max(n,1);break;case"auto_style":this.autoStyle=!!o;break;case"auto_resize":this._autoResize=!!o;break;case"draggable":this.dragEnable=!!o;break;case"resizable":this.resizeEnable=!!o;break;case"max_rows":t=t||this._maxRows!=n,this._maxRows=n<0?0:n;break;case"max_cols":t=t||this._maxCols!=n,this._maxCols=n<0?0:n;break;case"visible_rows":this._visibleRows=Math.max(n,0);break;case"visible_cols":this._visibleCols=Math.max(n,0);break;case"min_rows":this.minRows=Math.max(n,1);break;case"min_cols":this.minCols=Math.max(n,1);break;case"min_height":this.minHeight=Math.max(n,1);break;case"min_width":this.minWidth=Math.max(n,1);break;case"zoom_on_drag":this._zoomOnDrag=!!o;break;case"cascade":this.cascade!=o&&(this.cascade=o,this._cascadeGrid());break;case"fix_to_grid":this._fixToGrid=!!o;break;case"maintain_ratio":this._maintainRatio=!!o;break;case"prefer_new":this._preferNew=!!o;break;case"limit_to_screen":this._limitToScreen=!this._autoResize&&!!o;break;case"center_to_screen":this._centerToScreen=!!o;break;case"element_based_row_height":this._elementBasedDynamicRowHeight=!!o}}if(this._limitToScreen){var r=this._getContainerColumns();this._maxCols!=r&&(this._maxCols=r,t=!0)}if(this._limitToScreen&&this._centerToScreen?this.screenMargin=this._getScreenMargin():this.screenMargin=0,this._maintainRatio&&(this.colWidth&&this.rowHeight?this._aspectRatio=this.colWidth/this.rowHeight:this._maintainRatio=!1),t){if(this._maxCols>0&&this._maxRows>0)switch(this.cascade){case"left":case"right":this._maxCols=0;break;case"up":case"down":default:this._maxRows=0}this.updatePositionsAfterMaxChange()}this._calculateColWidth(),this._calculateRowHeight();var s=this._maxCols*this.colWidth,a=this._maxRows*this.rowHeight;s>0&&this.minWidth>s&&(this.minWidth=.75*this.colWidth),a>0&&this.minHeight>a&&(this.minHeight=.75*this.rowHeight),this.minWidth>this.colWidth&&(this.minCols=Math.max(this.minCols,Math.ceil(this.minWidth/this.colWidth))),this.minHeight>this.rowHeight&&(this.minRows=Math.max(this.minRows,Math.ceil(this.minHeight/this.rowHeight))),this._maxCols>0&&this.minCols>this._maxCols&&(this.minCols=1),this._maxRows>0&&this.minRows>this._maxRows&&(this.minRows=1),this._updateRatio();for(var c=0,l=this._items;c<l.length;c++){var d=l[c];this._removeFromGrid(d),d.setCascadeMode(this.cascade)}for(var h=0,p=this._items;h<p.length;h++){(d=p[h]).recalculateSelf(),this._addToGrid(d)}this._cascadeGrid(),this._filterGrid(),this._updateSize()},e.prototype.getItemPosition=function(e){return this._items[e].getGridPosition()},e.prototype.getItemSize=function(e){return this._items[e].getSize()},e.prototype.ngDoCheck=function(){if(null!=this._differ){var e=this._differ.diff(this._config);if(null!=e)return this._applyChanges(e),!0}return!1},e.prototype.setMargins=function(e){this.marginTop=Math.max(parseInt(e[0]),0),this.marginRight=e.length>=2?Math.max(parseInt(e[1]),0):this.marginTop,this.marginBottom=e.length>=3?Math.max(parseInt(e[2]),0):this.marginTop,this.marginLeft=e.length>=4?Math.max(parseInt(e[3]),0):this.marginRight},e.prototype.enableDrag=function(){this.dragEnable=!0},e.prototype.disableDrag=function(){this.dragEnable=!1},e.prototype.enableResize=function(){this.resizeEnable=!0},e.prototype.disableResize=function(){this.resizeEnable=!1},e.prototype.addItem=function(e){if(e.setCascadeMode(this.cascade),!this._preferNew){var t=this._fixGridPosition(e.getGridPosition(),e.getSize());e.setGridPosition(t)}this._items.push(e),this._addToGrid(e),this._updateSize(),e.recalculateSelf(),e.onCascadeEvent(),this._emitOnItemChange()},e.prototype.removeItem=function(e){this._removeFromGrid(e);for(var t=0;t<this._items.length;t++)this._items[t]==e&&this._items.splice(t,1);this._destroyed||(this._cascadeGrid(),this._updateSize(),this._items.forEach(function(e){return e.recalculateSelf()}),this._emitOnItemChange())},e.prototype.updateItem=function(e){this._removeFromGrid(e),this._addToGrid(e),this._cascadeGrid(),this._updateSize(),e.onCascadeEvent()},e.prototype.triggerCascade=function(){this._cascadeGrid(null,null)},e.prototype.triggerResize=function(){this.resizeEventHandler(null)},e.prototype.resizeEventHandler=function(e){if(this._calculateColWidth(),this._calculateRowHeight(),this._updateRatio(),this._limitToScreen){var t=this._getContainerColumns();this._maxCols!==t&&(this._maxCols=t,this.updatePositionsAfterMaxChange(),this._cascadeGrid()),this._centerToScreen&&(this.screenMargin=this._getScreenMargin(),this._items.forEach(function(e){e.recalculateSelf()}))}else this._autoResize&&this._items.forEach(function(e){e.recalculateSelf()});this._filterGrid(),this._updateSize()},e.prototype.mouseDownEventHandler=function(e){var t=this._getMousePosition(e),i=this._getItemFromPosition(t);null!=i&&(this.resizeEnable&&i.canResize(e)?(this._resizeReady=!0,e.preventDefault()):this.dragEnable&&i.canDrag(e)&&(this._dragReady=!0,e.preventDefault()))},e.prototype.mouseUpEventHandler=function(e){this.isDragging?this._dragStop(e):this.isResizing?this._resizeStop(e):(this._dragReady||this._resizeReady)&&(this._dragReady=!1,this._resizeReady=!1)},e.prototype.mouseMoveEventHandler=function(e){if(this._resizeReady)return this._resizeStart(e),void e.preventDefault();if(this._dragReady)return this._dragStart(e),void e.preventDefault();if(this.isDragging)this._drag(e);else if(this.isResizing)this._resize(e);else{var t=this._getMousePosition(e),i=this._getItemFromPosition(t);i&&i.onMouseMove(e)}},e.prototype.updatePositionsAfterMaxChange=function(){for(var e=0,t=this._items;e<t.length;e++){var i=t[e],o=i.getGridPosition(),n=i.getSize();if(!(!this._hasGridCollision(o,n)&&this._isWithinBounds(o,n)&&n.x<=this._maxCols&&n.y<=this._maxRows)){if(this._removeFromGrid(i),this._maxCols>0&&n.x>this._maxCols?(n.x=this._maxCols,i.setSize(n)):this._maxRows>0&&n.y>this._maxRows&&(n.y=this._maxRows,i.setSize(n)),this._hasGridCollision(o,n)||!this._isWithinBounds(o,n,!0)){var r=this._fixGridPosition(o,n);i.setGridPosition(r)}this._addToGrid(i)}}},e.prototype._calculateColWidth=function(){if(this._autoResize&&(this._maxCols>0||this._visibleCols>0)){var e=this._maxCols>0?this._maxCols:this._visibleCols,t=this._ngEl.nativeElement.getBoundingClientRect().width,i=Math.floor(t/e);(i-=this.marginLeft+this.marginRight)>0&&(this.colWidth=i)}(this.colWidth<this.minWidth||this.minCols>this._config.min_cols)&&(this.minCols=Math.max(this._config.min_cols,Math.ceil(this.minWidth/this.colWidth)))},e.prototype._calculateRowHeight=function(){if(this._autoResize&&(this._maxRows>0||this._visibleRows>0)){var e=this._maxRows>0?this._maxRows:this._visibleRows,t=void 0;t=this._elementBasedDynamicRowHeight?this._ngEl.nativeElement.getBoundingClientRect().height:window.innerHeight-this.marginTop-this.marginBottom;var i=Math.max(Math.floor(t/e),this.minHeight);(i-=this.marginTop+this.marginBottom)>0&&(this.rowHeight=i)}(this.rowHeight<this.minHeight||this.minRows>this._config.min_rows)&&(this.minRows=Math.max(this._config.min_rows,Math.ceil(this.minHeight/this.rowHeight)))},e.prototype._updateRatio=function(){this._autoResize&&this._maintainRatio&&(this._maxCols>0&&this._visibleRows<=0?this.rowHeight=this.colWidth/this._aspectRatio:this._maxRows>0&&this._visibleCols<=0?this.colWidth=this._aspectRatio*this.rowHeight:0==this._maxCols&&0==this._maxRows&&(this._visibleCols>0?this.rowHeight=this.colWidth/this._aspectRatio:this._visibleRows>0&&(this.colWidth=this._aspectRatio*this.rowHeight)))},e.prototype._applyChanges=function(e){var t=this;e.forEachAddedItem(function(e){t._config[e.key]=e.currentValue}),e.forEachChangedItem(function(e){t._config[e.key]=e.currentValue}),e.forEachRemovedItem(function(e){delete t._config[e.key]}),this.setConfig(this._config)},e.prototype._resizeStart=function(e){if(this.resizeEnable){var t=this._getMousePosition(e),i=this._getItemFromPosition(t);i&&(i.startMoving(),this._resizingItem=i,this._resizeDirection=i.canResize(e),this._removeFromGrid(i),this._createPlaceholder(i),this.isResizing=!0,this._resizeReady=!1,this.onResizeStart.emit(i),i.onResizeStartEvent())}},e.prototype._dragStart=function(e){if(this.dragEnable){var t=this._getMousePosition(e),i=this._getItemFromPosition(t);if(i){var o=i.getPosition(),n={left:t.left-o.left,top:t.top-o.top};i.startMoving(),this._draggingItem=i,this._posOffset=n,this._removeFromGrid(i),this._createPlaceholder(i),this.isDragging=!0,this._dragReady=!1,this.onDragStart.emit(i),i.onDragStartEvent(),this._zoomOnDrag&&this._zoomOut()}}},e.prototype._zoomOut=function(){this._renderer.setElementStyle(this._ngEl.nativeElement,"transform","scale(0.5, 0.5)")},e.prototype._resetZoom=function(){this._renderer.setElementStyle(this._ngEl.nativeElement,"transform","")},e.prototype._drag=function(e){if(this.isDragging){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty();var t=this._getMousePosition(e),i=t.left-this._posOffset.left,o=t.top-this._posOffset.top,n=this._draggingItem.getGridPosition(),r=this._calculateGridPosition(i,o),s=this._draggingItem.getSize();r=this._fixPosToBoundsX(r,s),this._isWithinBoundsY(r,s)||(r=this._fixPosToBoundsY(r,s)),r.col==n.col&&r.row==n.row||(this._draggingItem.setGridPosition(r,this._fixToGrid),this._placeholderRef.instance.setGridPosition(r),["up","down","left","right"].indexOf(this.cascade)>=0&&(this._fixGridCollisions(r,s),this._cascadeGrid(r,s))),this._fixToGrid||this._draggingItem.setPosition(i,o),this.onDrag.emit(this._draggingItem),this._draggingItem.onDragEvent()}},e.prototype._resize=function(e){if(this.isResizing){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty();var t=this._getMousePosition(e),i=this._resizingItem.getPosition(),o=this._resizingItem.getDimensions(),n="height"==this._resizeDirection?o.width:t.left-i.left+10,r="width"==this._resizeDirection?o.height:t.top-i.top+10;n<this.minWidth&&(n=this.minWidth),r<this.minHeight&&(r=this.minHeight),n<this._resizingItem.minWidth&&(n=this._resizingItem.minWidth),r<this._resizingItem.minHeight&&(r=this._resizingItem.minHeight);var s=this._calculateGridSize(n,r),a=this._resizingItem.getSize(),c=this._resizingItem.getGridPosition();this._isWithinBoundsX(c,s)||(s=this._fixSizeToBoundsX(c,s)),this._isWithinBoundsY(c,s)||(s=this._fixSizeToBoundsY(c,s)),(s=this._resizingItem.fixResize(s)).x==a.x&&s.y==a.y||(this._resizingItem.setSize(s,this._fixToGrid),this._placeholderRef.instance.setSize(s),["up","down","left","right"].indexOf(this.cascade)>=0&&(this._fixGridCollisions(c,s),this._cascadeGrid(c,s))),this._fixToGrid||this._resizingItem.setDimensions(n,r);var l=this._maxGridSize(i.left+n+2*e.movementX,i.top+r+2*e.movementY);"height"==this._resizeDirection&&(l.x=c.col+a.x),"width"==this._resizeDirection&&(l.y=c.row+a.y),this.onResize.emit(this._resizingItem),this._resizingItem.onResizeEvent()}},e.prototype._dragStop=function(e){if(this.isDragging){this.isDragging=!1;var t=this._draggingItem.getGridPosition();this._draggingItem.setGridPosition(t),this._addToGrid(this._draggingItem),this._cascadeGrid(),this._updateSize(),this._filterGrid(),this._draggingItem.stopMoving(),this._draggingItem.onDragStopEvent(),this.onDragStop.emit(this._draggingItem),this._draggingItem=null,this._posOffset=null,this._placeholderRef.destroy(),this._emitOnItemChange(),this._zoomOnDrag&&this._resetZoom()}},e.prototype._resizeStop=function(e){if(this.isResizing){this.isResizing=!1;var t=this._resizingItem.getSize();this._resizingItem.setSize(t),this._addToGrid(this._resizingItem),this._cascadeGrid(),this._updateSize(),this._filterGrid(),this._resizingItem.stopMoving(),this._resizingItem.onResizeStopEvent(),this.onResizeStop.emit(this._resizingItem),this._resizingItem=null,this._resizeDirection=null,this._placeholderRef.destroy(),this._emitOnItemChange()}},e.prototype._maxGridSize=function(e,t){return{x:Math.ceil(e/(this.colWidth+this.marginLeft+this.marginRight)),y:Math.ceil(t/(this.rowHeight+this.marginTop+this.marginBottom))}},e.prototype._calculateGridSize=function(e,t){e+=this.marginLeft+this.marginRight,t+=this.marginTop+this.marginBottom;var i=Math.max(this.minCols,Math.round(e/(this.colWidth+this.marginLeft+this.marginRight))),o=Math.max(this.minRows,Math.round(t/(this.rowHeight+this.marginTop+this.marginBottom)));return this._isWithinBoundsX({col:1,row:1},{x:i,y:o})||(i=this._maxCols),this._isWithinBoundsY({col:1,row:1},{x:i,y:o})||(o=this._maxRows),{x:i,y:o}},e.prototype._calculateGridPosition=function(e,t){var i=Math.max(1,Math.round(e/(this.colWidth+this.marginLeft+this.marginRight))+1),o=Math.max(1,Math.round(t/(this.rowHeight+this.marginTop+this.marginBottom))+1);return this._isWithinBoundsX({col:i,row:o},{x:1,y:1})||(i=this._maxCols),this._isWithinBoundsY({col:i,row:o},{x:1,y:1})||(o=this._maxRows),{col:i,row:o}},e.prototype._hasGridCollision=function(e,t){var i=this._getCollisions(e,t);return null!=i&&0!=i.length&&i.some(function(e){return!(null===e)})},e.prototype._getCollisions=function(e,t){var i=[];e.col||(e.col=1),e.row||(e.row=1);for(var o=0;o<t.y;o++)if(null!=this._itemGrid[e.row+o])for(var n=0;n<t.x;n++)if(null!=this._itemGrid[e.row+o][e.col+n]){var r=this._itemGrid[e.row+o][e.col+n];i.indexOf(r)<0&&i.push(r);var s=r.getGridPosition(),a=r.getSize();n=s.col+a.x-e.col}return i},e.prototype._fixGridCollisions=function(e,t){for(;this._hasGridCollision(e,t);){var i=this._getCollisions(e,t);this._removeFromGrid(i[0]);var o=i[0].getGridPosition(),n=i[0].getSize();switch(this.cascade){case"up":case"down":default:var r=o.row;o.row=e.row+t.y,this._isWithinBoundsY(o,n)||(o.col=e.col+t.x,o.row=r);break;case"left":case"right":var s=o.col;o.col=e.col+t.x,this._isWithinBoundsX(o,n)||(o.col=s,o.row=e.row+t.y)}i[0].setGridPosition(o),this._fixGridCollisions(o,n),this._addToGrid(i[0]),i[0].onCascadeEvent()}},e.prototype._cascadeGrid=function(e,t){if(!this._destroyed){if(e&&!t)throw new Error("Cannot cascade with only position and not dimensions");switch(this.isDragging&&this._draggingItem&&!e&&!t?(e=this._draggingItem.getGridPosition(),t=this._draggingItem.getSize()):this.isResizing&&this._resizingItem&&!e&&!t&&(e=this._resizingItem.getGridPosition(),t=this._resizingItem.getSize()),this.cascade){case"up":case"down":for(var i=new Map,o=1;o<=this._curMaxRow;o++)if(void 0!=this._itemGrid[o])for(var n=1;n<=this._curMaxCol&&void 0!=this._itemGrid[o];n++)if(!(i.has(n)&&o<i.get(n))&&null!=this._itemGrid[o][n]){if((h=this._itemGrid[o][n]).isFixed)continue;var r=h.getSize();if((p=h.getGridPosition()).col!=n||p.row!=o)continue;for(var s=i.has(n)?i.get(n):1,a=1;a<r.x;a++){var c=i.has(n+a)?i.get(n+a):1;s=Math.max(c,s)}e&&n+r.x>e.col&&n<e.col+t.x&&(o>=e.row&&o<e.row+t.y||r.y>e.row-s&&o>=e.row+t.y&&s<e.row+t.y)&&(s=Math.max(s,e.row+t.y));var l={col:n,row:s};s!=p.row&&this._isWithinBoundsY(l,r)&&(this._removeFromGrid(h),h.setGridPosition(l),h.onCascadeEvent(),this._addToGrid(h));for(a=0;a<r.x;a++)i.set(n+a,s+r.y)}break;case"left":case"right":var d=new Map;for(o=1;o<=this._curMaxRow;o++)if(void 0!=this._itemGrid[o])for(n=1;n<=this._curMaxCol&&void 0!=this._itemGrid[o];n++)if(!(d.has(o)&&n<d.get(o))&&null!=this._itemGrid[o][n]){var h,p;r=(h=this._itemGrid[o][n]).getSize();if((p=h.getGridPosition()).col!=n||p.row!=o)continue;var u=d.has(o)?d.get(o):1;for(a=1;a<r.y;a++){var g=d.has(o+a)?d.get(o+a):1;u=Math.max(g,u)}e&&o+r.y>e.row&&o<e.row+t.y&&(n>=e.col&&n<e.col+t.x||r.x>e.col-u&&n>=e.col+t.x&&u<e.col+t.x)&&(u=Math.max(u,e.col+t.x));l={col:u,row:o};u!=p.col&&this._isWithinBoundsX(l,r)&&(this._removeFromGrid(h),h.setGridPosition(l),h.onCascadeEvent(),this._addToGrid(h));for(a=0;a<r.y;a++)d.set(o+a,u+r.x)}}}},e.prototype._fixGridPosition=function(e,t){for(;this._hasGridCollision(e,t)||!this._isWithinBounds(e,t,!0);){if(this._hasGridCollision(e,t)){var i=this._getCollisions(e,t);switch(this.cascade){case"up":case"down":default:e.row=Math.max.apply(null,i.map(function(e){return e.row+e.sizey}));break;case"left":case"right":e.col=Math.max.apply(null,i.map(function(e){return e.col+e.sizex}))}}this._isWithinBoundsY(e,t)||(e.col++,e.row=1),this._isWithinBoundsX(e,t)||(e.row++,e.col=1)}return e},e.prototype._isWithinBoundsX=function(e,t,i){return void 0===i&&(i=!1),0==this._maxCols||i&&1==e.col||e.col+t.x-1<=this._maxCols},e.prototype._fixPosToBoundsX=function(e,t){return this._isWithinBoundsX(e,t)||(e.col=Math.max(this._maxCols-(t.x-1),1),e.row++),e},e.prototype._fixSizeToBoundsX=function(e,t){return this._isWithinBoundsX(e,t)||(t.x=Math.max(this._maxCols-(e.col-1),1),t.y++),t},e.prototype._isWithinBoundsY=function(e,t,i){return void 0===i&&(i=!1),0==this._maxRows||i&&1==e.row||e.row+t.y-1<=this._maxRows},e.prototype._fixPosToBoundsY=function(e,t){return this._isWithinBoundsY(e,t)||(e.row=Math.max(this._maxRows-(t.y-1),1),e.col++),e},e.prototype._fixSizeToBoundsY=function(e,t){return this._isWithinBoundsY(e,t)||(t.y=Math.max(this._maxRows-(e.row-1),1),t.x++),t},e.prototype._isWithinBounds=function(e,t,i){return void 0===i&&(i=!1),this._isWithinBoundsX(e,t,i)&&this._isWithinBoundsY(e,t,i)},e.prototype._fixPosToBounds=function(e,t){return this._fixPosToBoundsX(this._fixPosToBoundsY(e,t),t)},e.prototype._fixSizeToBounds=function(e,t){return this._fixSizeToBoundsX(e,this._fixSizeToBoundsY(e,t))},e.prototype._addToGrid=function(e){var t=e.getGridPosition(),i=e.getSize();this._hasGridCollision(t,i)&&(this._fixGridCollisions(t,i),t=e.getGridPosition());for(var o=0;o<i.y;o++){null==this._itemGrid[t.row+o]&&(this._itemGrid[t.row+o]={});for(var n=0;n<i.x;n++)this._itemGrid[t.row+o][t.col+n]=e}},e.prototype._removeFromGrid=function(e){for(var t in this._itemGrid)for(var i in this._itemGrid[t])this._itemGrid[t][i]==e&&delete this._itemGrid[t][i]},e.prototype._filterGrid=function(){for(var e in this._itemGrid){for(var t in this._itemGrid[e]){var i=this._itemGrid[e][t],o=e<i.row+i.sizey&&e>=i.row,n=t<i.col+i.sizex&&t>=i.col;(this._items.indexOf(this._itemGrid[e][t])<0||!o||!n)&&delete this._itemGrid[e][t]}0==Object.keys(this._itemGrid[e]).length&&delete this._itemGrid[e]}},e.prototype._updateSize=function(){if(!this._destroyed){var e=this._getMaxCol(),t=this._getMaxRow();e==this._curMaxCol&&t==this._curMaxRow||(this._curMaxCol=e,this._curMaxRow=t),this._renderer.setElementStyle(this._ngEl.nativeElement,"width","100%"),this._elementBasedDynamicRowHeight||this._renderer.setElementStyle(this._ngEl.nativeElement,"height",t*(this.rowHeight+this.marginTop+this.marginBottom)+"px")}},e.prototype._getMaxRow=function(){return Math.max.apply(null,this._items.map(function(e){return e.row+e.sizey-1}))},e.prototype._getMaxCol=function(){return Math.max.apply(null,this._items.map(function(e){return e.col+e.sizex-1}))},e.prototype._getMousePosition=function(e){(window.TouchEvent&&e instanceof TouchEvent||e.touches||e.changedTouches)&&(e=e.touches.length>0?e.touches[0]:e.changedTouches[0]);var t=this._ngEl.nativeElement.getBoundingClientRect(),i=e.clientX-t.left,o=e.clientY-t.top;return"down"==this.cascade&&(o=t.top+t.height-e.clientY),"right"==this.cascade&&(i=t.left+t.width-e.clientX),this.isDragging&&this._zoomOnDrag&&(i*=2,o*=2),{left:i,top:o}},e.prototype._getAbsoluteMousePosition=function(e){return(window.TouchEvent&&e instanceof TouchEvent||e.touches||e.changedTouches)&&(e=e.touches.length>0?e.touches[0]:e.changedTouches[0]),{left:e.clientX,top:e.clientY}},e.prototype._getContainerColumns=function(){var e=this._ngEl.nativeElement.getBoundingClientRect().width,t=this.colWidth+this.marginLeft+this.marginRight;return Math.floor(e/t)},e.prototype._getScreenMargin=function(){var e=this._ngEl.nativeElement.getBoundingClientRect().width,t=this.colWidth+this.marginLeft+this.marginRight;return Math.floor((e-this._maxCols*t)/2)},e.prototype._getContainerRows=function(){var e=window.innerHeight-this.marginTop-this.marginBottom;return Math.floor(e/(this.rowHeight+this.marginTop+this.marginBottom))},e.prototype._getItemFromPosition=function(e){for(var t=0,i=this._items;t<i.length;t++){var o=i[t],n=o.getDimensions(),r=o.getPosition();if(e.left>r.left&&e.left<r.left+n.width&&e.top>r.top&&e.top<r.top+n.height)return o}return null},e.prototype._createPlaceholder=function(e){var t=e.getGridPosition(),i=e.getSize(),o=this.componentFactoryResolver.resolveComponentFactory(te),n=e.containerRef.createComponent(o);this._placeholderRef=n;var r=n.instance;r.registerGrid(this),r.setCascadeMode(this.cascade),r.setGridPosition({col:t.col,row:t.row}),r.setSize({x:i.x,y:i.y})},e.prototype._emitOnItemChange=function(){this.onItemChange.emit(this._items.map(function(e){return e.getEventOutput()}))},e.CONST_DEFAULT_CONFIG={margins:[10],draggable:!0,resizable:!0,max_cols:0,max_rows:0,visible_cols:0,visible_rows:0,col_width:250,row_height:250,cascade:"up",min_width:100,min_height:100,fix_to_grid:!1,auto_style:!0,auto_resize:!1,maintain_ratio:!1,prefer_new:!1,zoom_on_drag:!1,limit_to_screen:!1,center_to_screen:!1,element_based_row_height:!1},e.decorators=[{type:n.Directive,args:[{selector:"[ngGrid]",inputs:["config: ngGrid"],host:{"(mousedown)":"mouseDownEventHandler($event)","(mousemove)":"mouseMoveEventHandler($event)","(mouseup)":"mouseUpEventHandler($event)","(touchstart)":"mouseDownEventHandler($event)","(touchmove)":"mouseMoveEventHandler($event)","(touchend)":"mouseUpEventHandler($event)","(window:resize)":"resizeEventHandler($event)","(document:mousemove)":"mouseMoveEventHandler($event)","(document:mouseup)":"mouseUpEventHandler($event)"}}]}],e.ctorParameters=function(){return[{type:n.KeyValueDiffers},{type:n.ElementRef},{type:n.Renderer},{type:n.ComponentFactoryResolver},{type:n.ViewContainerRef}]},e.propDecorators={onDragStart:[{type:n.Output}],onDrag:[{type:n.Output}],onDragStop:[{type:n.Output}],onResizeStart:[{type:n.Output}],onResize:[{type:n.Output}],onResizeStop:[{type:n.Output}],onItemChange:[{type:n.Output}]},e}(),oe=function(){function e(t,i,o,r,s){this._differs=t,this._ngEl=i,this._renderer=o,this._ngGrid=r,this.containerRef=s,this.onItemChange=new n.EventEmitter(!1),this.onDragStart=new n.EventEmitter,this.onDrag=new n.EventEmitter,this.onDragStop=new n.EventEmitter,this.onDragAny=new n.EventEmitter,this.onResizeStart=new n.EventEmitter,this.onResize=new n.EventEmitter,this.onResizeStop=new n.EventEmitter,this.onResizeAny=new n.EventEmitter,this.onChangeStart=new n.EventEmitter,this.onChange=new n.EventEmitter,this.onChangeStop=new n.EventEmitter,this.onChangeAny=new n.EventEmitter,this.ngGridItemChange=new n.EventEmitter,this.isFixed=!1,this.isDraggable=!0,this.isResizable=!0,this.minWidth=0,this.minHeight=0,this._currentPosition={col:1,row:1},this._size={x:1,y:1},this._config=e.CONST_DEFAULT_CONFIG,this._added=!1,this._maxCols=0,this._minCols=0,this._maxRows=0,this._minRows=0}return Object.defineProperty(e.prototype,"config",{set:function(t){var i=e.CONST_DEFAULT_CONFIG;for(var o in i)null==t[o]&&(t[o]=i[o]);this.setConfig(t),null==this._differ&&null!=t&&(this._differ=this._differs.find(this._config).create(null)),this._added||(this._added=!0,this._ngGrid.addItem(this)),this._recalculateDimensions(),this._recalculatePosition()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sizex",{get:function(){return this._size.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sizey",{get:function(){return this._size.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"col",{get:function(){return this._currentPosition.col},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"row",{get:function(){return this._currentPosition.row},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentCol",{get:function(){return this._currentPosition.col},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentRow",{get:function(){return this._currentPosition.row},enumerable:!0,configurable:!0}),e.prototype.onResizeStartEvent=function(){var e=this.getEventOutput();this.onResizeStart.emit(e),this.onResizeAny.emit(e),this.onChangeStart.emit(e),this.onChangeAny.emit(e)},e.prototype.onResizeEvent=function(){var e=this.getEventOutput();this.onResize.emit(e),this.onResizeAny.emit(e),this.onChange.emit(e),this.onChangeAny.emit(e)},e.prototype.onResizeStopEvent=function(){var e=this.getEventOutput();this.onResizeStop.emit(e),this.onResizeAny.emit(e),this.onChangeStop.emit(e),this.onChangeAny.emit(e),this._config.sizex=this._size.x,this._config.sizey=this._size.y,this.ngGridItemChange.emit(this._config)},e.prototype.onDragStartEvent=function(){var e=this.getEventOutput();this.onDragStart.emit(e),this.onDragAny.emit(e),this.onChangeStart.emit(e),this.onChangeAny.emit(e)},e.prototype.onDragEvent=function(){var e=this.getEventOutput();this.onDrag.emit(e),this.onDragAny.emit(e),this.onChange.emit(e),this.onChangeAny.emit(e)},e.prototype.onDragStopEvent=function(){var e=this.getEventOutput();this.onDragStop.emit(e),this.onDragAny.emit(e),this.onChangeStop.emit(e),this.onChangeAny.emit(e),this._config.col=this._currentPosition.col,this._config.row=this._currentPosition.row,this.ngGridItemChange.emit(this._config)},e.prototype.onCascadeEvent=function(){this._config.sizex=this._size.x,this._config.sizey=this._size.y,this._config.col=this._currentPosition.col,this._config.row=this._currentPosition.row,this.ngGridItemChange.emit(this._config)},e.prototype.ngOnInit=function(){this._renderer.setElementClass(this._ngEl.nativeElement,"grid-item",!0),this._ngGrid.autoStyle&&this._renderer.setElementStyle(this._ngEl.nativeElement,"position","absolute"),this._recalculateDimensions(),this._recalculatePosition(),this._added||(this._added=!0,this._ngGrid.addItem(this))},e.prototype.canDrag=function(e){return!!this.isDraggable&&(!this._dragHandle||this.findHandle(this._dragHandle,e.target))},e.prototype.findHandle=function(e,t){try{for(var i=t;i&&i!=this._ngEl.nativeElement;){if(this.elementMatches(i,e))return!0;i=i.parentElement}}catch(e){}return!1},e.prototype.canResize=function(e){if(!this.isResizable)return null;if(this._resizeHandle)return this.findHandle(this._resizeHandle,e.target)?"both":null;if(this._borderSize<=0)return null;var t=this._getMousePosition(e);return t.left<this._elemWidth&&t.left>this._elemWidth-this._borderSize&&t.top<this._elemHeight&&t.top>this._elemHeight-this._borderSize?"both":t.left<this._elemWidth&&t.left>this._elemWidth-this._borderSize?"width":t.top<this._elemHeight&&t.top>this._elemHeight-this._borderSize?"height":null},e.prototype.onMouseMove=function(e){if(this._ngGrid.autoStyle)if(this._ngGrid.resizeEnable&&!this._resizeHandle&&this.isResizable){var t=this._getMousePosition(e);t.left<this._elemWidth&&t.left>this._elemWidth-this._borderSize&&t.top<this._elemHeight&&t.top>this._elemHeight-this._borderSize?this._renderer.setElementStyle(this._ngEl.nativeElement,"cursor","nwse-resize"):t.left<this._elemWidth&&t.left>this._elemWidth-this._borderSize?this._renderer.setElementStyle(this._ngEl.nativeElement,"cursor","ew-resize"):t.top<this._elemHeight&&t.top>this._elemHeight-this._borderSize?this._renderer.setElementStyle(this._ngEl.nativeElement,"cursor","ns-resize"):this._ngGrid.dragEnable&&this.canDrag(e)?this._renderer.setElementStyle(this._ngEl.nativeElement,"cursor","move"):this._renderer.setElementStyle(this._ngEl.nativeElement,"cursor","default")}else this._ngGrid.resizeEnable&&this.canResize(e)?this._renderer.setElementStyle(this._ngEl.nativeElement,"cursor","nwse-resize"):this._ngGrid.dragEnable&&this.canDrag(e)?this._renderer.setElementStyle(this._ngEl.nativeElement,"cursor","move"):this._renderer.setElementStyle(this._ngEl.nativeElement,"cursor","default")},e.prototype.ngOnDestroy=function(){this._added&&this._ngGrid.removeItem(this)},e.prototype.getElement=function(){return this._ngEl},e.prototype.getDragHandle=function(){return this._dragHandle},e.prototype.getResizeHandle=function(){return this._resizeHandle},e.prototype.getDimensions=function(){return{width:this._elemWidth,height:this._elemHeight}},e.prototype.getSize=function(){return this._size},e.prototype.getPosition=function(){return{left:this._elemLeft,top:this._elemTop}},e.prototype.getGridPosition=function(){return this._currentPosition},e.prototype.setConfig=function(t){this._config=t,this._payload=t.payload,this._currentPosition.col=t.col?t.col:e.CONST_DEFAULT_CONFIG.col,this._currentPosition.row=t.row?t.row:e.CONST_DEFAULT_CONFIG.row,this._size.x=t.sizex?t.sizex:e.CONST_DEFAULT_CONFIG.sizex,this._size.y=t.sizey?t.sizey:e.CONST_DEFAULT_CONFIG.sizey,this._dragHandle=t.dragHandle,this._resizeHandle=t.resizeHandle,this._borderSize=t.borderSize,this.isDraggable=!!t.draggable,this.isResizable=!!t.resizable,this.isFixed=!!t.fixed,this._maxCols=!isNaN(t.maxCols)&&isFinite(t.maxCols)?t.maxCols:0,this._minCols=!isNaN(t.minCols)&&isFinite(t.minCols)?t.minCols:0,this._maxRows=!isNaN(t.maxRows)&&isFinite(t.maxRows)?t.maxRows:0,this._minRows=!isNaN(t.minRows)&&isFinite(t.minRows)?t.minRows:0,this.minWidth=!isNaN(t.minWidth)&&isFinite(t.minWidth)?t.minWidth:0,this.minHeight=!isNaN(t.minHeight)&&isFinite(t.minHeight)?t.minHeight:0,this._minCols>0&&this._maxCols>0&&this._minCols>this._maxCols&&(this._minCols=0),this._minRows>0&&this._maxRows>0&&this._minRows>this._maxRows&&(this._minRows=0),this._added&&this._ngGrid.updateItem(this),this._size=this.fixResize(this._size),this._recalculatePosition(),this._recalculateDimensions()},e.prototype.ngDoCheck=function(){if(null!=this._differ){var e=this._differ.diff(this._config);if(null!=e)return this._applyChanges(e),!0}return!1},e.prototype.setSize=function(e,t){void 0===t&&(t=!0),e=this.fixResize(e),this._size=e,t&&this._recalculateDimensions(),this.onItemChange.emit(this.getEventOutput())},e.prototype.setGridPosition=function(e,t){void 0===t&&(t=!0),this._currentPosition=e,t&&this._recalculatePosition(),this.onItemChange.emit(this.getEventOutput())},e.prototype.getEventOutput=function(){return{payload:this._payload,col:this._currentPosition.col,row:this._currentPosition.row,sizex:this._size.x,sizey:this._size.y,width:this._elemWidth,height:this._elemHeight,left:this._elemLeft,top:this._elemTop}},e.prototype.setPosition=function(e,t){switch(this._cascadeMode){case"up":case"left":default:this._renderer.setElementStyle(this._ngEl.nativeElement,"left",e+"px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"top",t+"px");break;case"right":this._renderer.setElementStyle(this._ngEl.nativeElement,"right",e+"px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"top",t+"px");break;case"down":this._renderer.setElementStyle(this._ngEl.nativeElement,"left",e+"px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"bottom",t+"px")}this._elemLeft=e,this._elemTop=t},e.prototype.setCascadeMode=function(e){switch(this._cascadeMode=e,e){case"up":case"left":default:this._renderer.setElementStyle(this._ngEl.nativeElement,"left",this._elemLeft+"px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"top",this._elemTop+"px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"right",null),this._renderer.setElementStyle(this._ngEl.nativeElement,"bottom",null);break;case"right":this._renderer.setElementStyle(this._ngEl.nativeElement,"right",this._elemLeft+"px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"top",this._elemTop+"px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"left",null),this._renderer.setElementStyle(this._ngEl.nativeElement,"bottom",null);break;case"down":this._renderer.setElementStyle(this._ngEl.nativeElement,"left",this._elemLeft+"px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"bottom",this._elemTop+"px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"right",null),this._renderer.setElementStyle(this._ngEl.nativeElement,"top",null)}},e.prototype.setDimensions=function(e,t){e<this.minWidth&&(e=this.minWidth),t<this.minHeight&&(t=this.minHeight),this._renderer.setElementStyle(this._ngEl.nativeElement,"width",e+"px"),this._renderer.setElementStyle(this._ngEl.nativeElement,"height",t+"px"),this._elemWidth=e,this._elemHeight=t},e.prototype.startMoving=function(){this._renderer.setElementClass(this._ngEl.nativeElement,"moving",!0);var e=window.getComputedStyle(this._ngEl.nativeElement);this._ngGrid.autoStyle&&this._renderer.setElementStyle(this._ngEl.nativeElement,"z-index",(parseInt(e.getPropertyValue("z-index"))+1).toString())},e.prototype.stopMoving=function(){this._renderer.setElementClass(this._ngEl.nativeElement,"moving",!1);var e=window.getComputedStyle(this._ngEl.nativeElement);this._ngGrid.autoStyle&&this._renderer.setElementStyle(this._ngEl.nativeElement,"z-index",(parseInt(e.getPropertyValue("z-index"))-1).toString())},e.prototype.recalculateSelf=function(){this._recalculatePosition(),this._recalculateDimensions()},e.prototype.fixResize=function(e){this._maxCols>0&&e.x>this._maxCols&&(e.x=this._maxCols),this._maxRows>0&&e.y>this._maxRows&&(e.y=this._maxRows),this._minCols>0&&e.x<this._minCols&&(e.x=this._minCols),this._minRows>0&&e.y<this._minRows&&(e.y=this._minRows);e.x*this._ngGrid.colWidth+(this._ngGrid.marginLeft+this._ngGrid.marginRight)*(e.x-1)<this.minWidth&&(e.x=Math.ceil((this.minWidth+this._ngGrid.marginRight+this._ngGrid.marginLeft)/(this._ngGrid.colWidth+this._ngGrid.marginRight+this._ngGrid.marginLeft)));return e.y*this._ngGrid.rowHeight+(this._ngGrid.marginTop+this._ngGrid.marginBottom)*(e.y-1)<this.minHeight&&(e.y=Math.ceil((this.minHeight+this._ngGrid.marginBottom+this._ngGrid.marginTop)/(this._ngGrid.rowHeight+this._ngGrid.marginBottom+this._ngGrid.marginTop))),e},e.prototype.elementMatches=function(e,t){if(!e)return!1;if(e.matches)return e.matches(t);if(e.oMatchesSelector)return e.oMatchesSelector(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.mozMatchesSelector)return e.mozMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(!e.document||!e.ownerDocument)return!1;for(var i=(e.document||e.ownerDocument).querySelectorAll(t),o=i.length;--o>=0&&i.item(o)!==e;);return o>-1},e.prototype._recalculatePosition=function(){var e=(this._ngGrid.colWidth+this._ngGrid.marginLeft+this._ngGrid.marginRight)*(this._currentPosition.col-1)+this._ngGrid.marginLeft+this._ngGrid.screenMargin,t=(this._ngGrid.rowHeight+this._ngGrid.marginTop+this._ngGrid.marginBottom)*(this._currentPosition.row-1)+this._ngGrid.marginTop;this.setPosition(e,t)},e.prototype._recalculateDimensions=function(){this._size.x<this._ngGrid.minCols&&(this._size.x=this._ngGrid.minCols),this._size.y<this._ngGrid.minRows&&(this._size.y=this._ngGrid.minRows);var e=this._ngGrid.colWidth*this._size.x+(this._ngGrid.marginLeft+this._ngGrid.marginRight)*(this._size.x-1),t=this._ngGrid.rowHeight*this._size.y+(this._ngGrid.marginTop+this._ngGrid.marginBottom)*(this._size.y-1),i=Math.max(this.minWidth,this._ngGrid.minWidth,e),o=Math.max(this.minHeight,this._ngGrid.minHeight,t);this.setDimensions(i,o)},e.prototype._getMousePosition=function(e){if(e.originalEvent&&e.originalEvent.touches){var t=e.originalEvent;e=t.touches.length?t.touches[0]:t.changedTouches.length?t.changedTouches[0]:e}else e.touches&&(e=e.touches.length?e.touches[0]:e.changedTouches.length?e.changedTouches[0]:e);var i=this._ngEl.nativeElement.getBoundingClientRect();return{left:e.clientX-i.left,top:e.clientY-i.top}},e.prototype._applyChanges=function(e){var t=this;e.forEachAddedItem(function(e){t._config[e.key]=e.currentValue}),e.forEachChangedItem(function(e){t._config[e.key]=e.currentValue}),e.forEachRemovedItem(function(e){delete t._config[e.key]}),this.setConfig(this._config)},e.CONST_DEFAULT_CONFIG={col:1,row:1,sizex:1,sizey:1,dragHandle:null,resizeHandle:null,fixed:!1,draggable:!0,resizable:!0,borderSize:25},e.decorators=[{type:n.Directive,args:[{selector:"[ngGridItem]",inputs:["config: ngGridItem"]}]}],e.ctorParameters=function(){return[{type:n.KeyValueDiffers},{type:n.ElementRef},{type:n.Renderer},{type:ie},{type:n.ViewContainerRef}]},e.propDecorators={onItemChange:[{type:n.Output}],onDragStart:[{type:n.Output}],onDrag:[{type:n.Output}],onDragStop:[{type:n.Output}],onDragAny:[{type:n.Output}],onResizeStart:[{type:n.Output}],onResize:[{type:n.Output}],onResizeStop:[{type:n.Output}],onResizeAny:[{type:n.Output}],onChangeStart:[{type:n.Output}],onChange:[{type:n.Output}],onChangeStop:[{type:n.Output}],onChangeAny:[{type:n.Output}],ngGridItemChange:[{type:n.Output}]},e}(),ne=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{declarations:[ie,oe,te],entryComponents:[te],exports:[ie,oe]}]}],e.ctorParameters=function(){return[]},e}(),re=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},se=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ae=ce=function(){function e(e,t,i,o){this.dotDialogService=e,this.dotEditLayoutService=t,this.dotMessageService=i,this.dotEventsService=o,this.gridConfig={margins:[0,8,8,0],draggable:!0,resizable:!0,max_cols:b,max_rows:0,visible_cols:b,min_cols:1,min_rows:1,col_width:90,row_height:206,cascade:"up",min_width:40,min_height:206,fix_to_grid:!0,auto_style:!0,auto_resize:!0,maintain_ratio:!1,prefer_new:!1,zoom_on_drag:!1,limit_to_screen:!0},this.propagateChange=function(e){}}return e.prototype.ngOnInit=function(){var e=this;this.dotMessageService.getMessages(["editpage.confirm.header","editpage.confirm.message.delete","editpage.confirm.message.delete.warning","editpage.action.cancel","editpage.action.delete","editpage.action.save"]).subscribe(),this.dotEventsService.listen("dot-side-nav-toggle").subscribe(function(){e.resizeGrid(200)}),this.dotEventsService.listen("layout-sidebar-change").subscribe(function(){e.resizeGrid()}),this.resizeGrid()},e.prototype.addBox=function(){var e=this.setConfigOfNewContainer();this.grid.push({config:e,containers:[]}),this.propagateChange(this.getModel())},e.prototype.getModel=function(){return this.dotEditLayoutService.getDotLayoutBody(this.grid)},e.prototype.updateModel=function(){this.deleteEmptyRows(),this.propagateChange(this.getModel())},e.prototype.onRemoveContainer=function(e){var t=this;this.grid[e].containers.length?this.dotDialogService.confirm({accept:function(){t.removeContainer(e)},header:this.dotMessageService.get("editpage.confirm.header"),message:this.dotMessageService.get("editpage.confirm.message.delete")+" <span>"+this.dotMessageService.get("editpage.confirm.message.delete.warning")+"</span>",footerLabel:{accept:this.dotMessageService.get("editpage.action.delete"),reject:this.dotMessageService.get("editpage.action.cancel")}}):this.removeContainer(e)},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(){},e.prototype.updateContainers=function(){this.propagateChange(this.getModel())},e.prototype.writeValue=function(e){e&&(this.value=e||null,this.setGridValue())},e.prototype.setGridValue=function(){this.grid=this.isHaveRows()?this.dotEditLayoutService.getDotLayoutGridBox(this.value):w.slice()},e.prototype.removeContainer=function(e){this.grid[e]&&(this.grid.splice(e,1),this.deleteEmptyRows(),this.propagateChange(this.getModel()))},e.prototype.setConfigOfNewContainer=function(){var e=Object.assign({},x);if(this.grid.length){var t=v.chain(this.grid).groupBy("config.row").values().last().maxBy("config.col").value(),i=x.sizex;(i+=t.config.col-1+t.config.sizex)<=b?(e.row=t.config.row,e.col=t.config.col+t.config.sizex):(e.row=t.config.row+1,e.col=1)}return e},e.prototype.deleteEmptyRows=function(){var e=this;setTimeout(function(){e.grid=v.chain(e.grid).sortBy("config.row").groupBy("config.row").values().map(e.updateContainerIndex).flatten().value()},0)},e.prototype.updateContainerIndex=function(e,t){return e[0].row!==t+1?e.map(function(e){return e.config.row=t+1,e}):e},e.prototype.isHaveRows=function(){return!!(this.value&&this.value.rows&&this.value.rows.length)},e.prototype.resizeGrid=function(e){var t=this;setTimeout(function(){t.ngGrid.triggerResize()},e||0)},e}();re([Object(n.ViewChild)(ie),se("design:type","function"==typeof(le="undefined"!=typeof ie&&ie)&&le||Object)],ae.prototype,"ngGrid",void 0),ae=ce=re([Object(n.Component)({selector:"dot-edit-layout-grid",template:i("DoxT"),styles:[i("p9TT")],providers:[{multi:!0,provide:d.NG_VALUE_ACCESSOR,useExisting:Object(n.forwardRef)(function(){return ce})}]}),se("design:paramtypes",["function"==typeof(de="undefined"!=typeof g.a&&g.a)&&de||Object,"function"==typeof(he="undefined"!=typeof E&&E)&&he||Object,"function"==typeof(pe="undefined"!=typeof m.a&&m.a)&&pe||Object,"function"==typeof(ue="undefined"!=typeof _.a&&_.a)&&ue||Object])],ae);var ce,le,de,he,pe,ue,ge=i("qh6q"),fe=i("gUdW"),me=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},ye=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_e=function(){function e(e,t){this.paginationService=e,this.dotMessageService=t,this.data=[],this.change=new n.EventEmitter,this.currentContainers=[]}return e.prototype.ngOnInit=function(){this.paginationService.url="v1/containers",this.dotMessageService.getMessages(["editpage.container.add.label"]).subscribe()},e.prototype.containerChange=function(e){!this.multiple&&this.isContainerSelected(e)||(this.data.push({container:e}),this.change.emit(this.data))},e.prototype.handleFilterChange=function(e){this.getContainersList(e)},e.prototype.handlePageChange=function(e){this.getContainersList(e.filter,e.first)},e.prototype.removeContainerItem=function(e){this.data.splice(e,1),this.change.emit(this.data)},e.prototype.isContainerSelected=function(e){return this.data.some(function(t){return t.container.identifier===e.identifier})},e.prototype.getContainersList=function(e,t){var i=this;void 0===e&&(e=""),void 0===t&&(t=0),this.paginationService.filter=e,this.paginationService.getWithOffset(t).subscribe(function(e){i.currentContainers=e.splice(0),i.totalRecords=i.totalRecords||i.paginationService.totalRecords})},e}();me([Object(n.Input)(),ye("design:type",Array)],_e.prototype,"data",void 0),me([Object(n.Input)(),ye("design:type",Boolean)],_e.prototype,"multiple",void 0),me([Object(n.Output)(),ye("design:type","function"==typeof(ve="undefined"!=typeof n.EventEmitter&&n.EventEmitter)&&ve||Object)],_e.prototype,"change",void 0),_e=me([Object(n.Component)({selector:"dot-container-selector",template:i("CQ74"),styles:[i("4sTJ")]}),ye("design:paramtypes",["function"==typeof(be="undefined"!=typeof fe.b&&fe.b)&&be||Object,"function"==typeof(xe="undefined"!=typeof m.a&&m.a)&&xe||Object])],_e);var ve,be,xe,we=i("a2jI"),Re=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Se=function(){return function(){}}();Se=Re([Object(n.NgModule)({declarations:[_e],exports:[_e],imports:[o.CommonModule,d.FormsModule,h.ButtonModule,ge.a],providers:[we.b]})],Se);var Ee=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Oe=function(){return function(){}}();Oe=Ee([Object(n.NgModule)({declarations:[ae],imports:[o.CommonModule,ne,p.a,Se,h.ButtonModule],exports:[ae],providers:[]})],Oe);var Ce=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Me=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},je=Pe=function(){function e(e,t){this.dotEditLayoutService=e,this.dotMessageService=t,this.propagateChange=function(e){}}return e.prototype.ngOnInit=function(){this.dotMessageService.getMessages(["editpage.layout.designer.sidebar"]).subscribe()},e.prototype.getModel=function(e){return e&&(this.value.containers=e.map(function(e){return{identifier:e.container.identifier,uuid:e.uuid}})),this.value},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(){},e.prototype.updateAndPropagate=function(e){this.propagateChange(e?this.getModel(e):this.value)},e.prototype.writeValue=function(e){e&&(this.value=e||null,this.setContainersValue())},e.prototype.setContainersValue=function(){this.containers=this.dotEditLayoutService.getDotLayoutSidebar(this.value.containers)},e}();je=Pe=Ce([Object(n.Component)({selector:"dot-edit-layout-sidebar",template:i("fyp8"),styles:[i("LK4U")],providers:[{multi:!0,provide:d.NG_VALUE_ACCESSOR,useExisting:Object(n.forwardRef)(function(){return Pe})}]}),Me("design:paramtypes",["function"==typeof(ze="undefined"!=typeof E&&E)&&ze||Object,"function"==typeof(Ge="undefined"!=typeof m.a&&m.a)&&Ge||Object])],je);var Pe,ze,Ge,De=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},ke=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ie=Te=function(){function e(e,t){this.dotMessageService=e,this.dotEventsService=t,this.change=new n.EventEmitter,this.propagateChange=function(e){}}return e.prototype.ngOnInit=function(){this.dotMessageService.getMessages(["editpage.layout.sidebar.width.small","editpage.layout.sidebar.width.medium","editpage.layout.sidebar.width.large","editpage.layout.sidebar.action.open"]).subscribe(),this.value={containers:[],location:"",width:""}},e.prototype.changeSidebarSize=function(){this.overlay.hide(),this.dotEventsService.notify("layout-sidebar-change"),this.change.emit()},e.prototype.writeValue=function(e){e&&(this.value=e)},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(){},e}();De([Object(n.ViewChild)("overlay"),ke("design:type",Object)],Ie.prototype,"overlay",void 0),De([Object(n.Output)(),ke("design:type","function"==typeof(Le="undefined"!=typeof n.EventEmitter&&n.EventEmitter)&&Le||Object)],Ie.prototype,"change",void 0),Ie=Te=De([Object(n.Component)({selector:"dot-sidebar-properties",template:i("EePd"),styles:[i("04QJ")],providers:[{multi:!0,provide:d.NG_VALUE_ACCESSOR,useExisting:Object(n.forwardRef)(function(){return Te})}]}),ke("design:paramtypes",["function"==typeof(Be="undefined"!=typeof m.a&&m.a)&&Be||Object,"function"==typeof(He="undefined"!=typeof _.a&&_.a)&&He||Object])],Ie);var Te,Le,Be,He,We=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Ae=function(){return function(){}}();Ae=We([Object(n.NgModule)({declarations:[Ie],imports:[h.ButtonModule,o.CommonModule,d.FormsModule,h.RadioButtonModule,h.OverlayPanelModule,d.ReactiveFormsModule],exports:[Ie]})],Ae);var Ve=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Fe=function(){return function(){}}();Fe=Ve([Object(n.NgModule)({declarations:[je],imports:[o.CommonModule,p.a,d.FormsModule,Se,h.ButtonModule,Ae],exports:[je],providers:[]})],Fe);var Ne=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Ue=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ye=Xe=function(){function e(){this.change=new n.EventEmitter,this.propagateChange=function(e){}}return e.prototype.onClick=function(){this.value=!this.value,this.propagateChange(this.value),this.change.emit(this.value)},e.prototype.writeValue=function(e){e&&(this.value=e)},e.prototype.setChecked=function(){this.value=!0},e.prototype.setUnchecked=function(){this.value=!1},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(){},e}();Ne([Object(n.Input)(),Ue("design:type",String)],Ye.prototype,"label",void 0),Ne([Object(n.Output)(),Ue("design:type","function"==typeof($e="undefined"!=typeof n.EventEmitter&&n.EventEmitter)&&$e||Object)],Ye.prototype,"change",void 0),Ne([Object(n.HostListener)("click",["$event"]),Ue("design:type",Function),Ue("design:paramtypes",[]),Ue("design:returntype",void 0)],Ye.prototype,"onClick",null),Ye=Xe=Ne([Object(n.Component)({selector:"dot-layout-properties-item",template:i("dofU"),styles:[i("yqMY")],providers:[{multi:!0,provide:d.NG_VALUE_ACCESSOR,useExisting:Object(n.forwardRef)(function(){return Xe})}]}),Ue("design:paramtypes",[])],Ye);var Xe,$e,qe=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Ze=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Je=Ke=function(){function e(e){this.dotMessageService=e,this.propagateChange=function(e){}}return e.prototype.ngOnInit=function(){this.dotMessageService.getMessages(["editpage.layout.properties.sidebar.left","editpage.layout.properties.sidebar.right"]).subscribe()},e.prototype.writeValue=function(e){e&&(this.value=e)},e.prototype.setValue=function(e,t){e&&"left"===t?(this.propertyItemLeft.setChecked(),this.propertyItemRight.setUnchecked()):e&&"right"===t?(this.propertyItemLeft.setUnchecked(),this.propertyItemRight.setChecked()):this.value.containers=[],this.value.location=e?t:"",this.propagateChange(this.value)},e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(){},e}();qe([Object(n.ViewChild)("propertyItemLeft"),Ze("design:type","function"==typeof(Qe="undefined"!=typeof Ye&&Ye)&&Qe||Object)],Je.prototype,"propertyItemLeft",void 0),qe([Object(n.ViewChild)("propertyItemRight"),Ze("design:type","function"==typeof(et="undefined"!=typeof Ye&&Ye)&&et||Object)],Je.prototype,"propertyItemRight",void 0),Je=Ke=qe([Object(n.Component)({selector:"dot-layout-property-sidebar",template:i("Jdfx"),providers:[{multi:!0,provide:d.NG_VALUE_ACCESSOR,useExisting:Object(n.forwardRef)(function(){return Ke})}]}),Ze("design:paramtypes",["function"==typeof(tt="undefined"!=typeof m.a&&m.a)&&tt||Object])],Je);var Ke,Qe,et,tt,it=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},ot=function(){return function(){}}();ot=it([Object(n.NgModule)({declarations:[Ye],imports:[o.CommonModule],exports:[Ye],providers:[]})],ot);var nt=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},rt=function(){return function(){}}();rt=nt([Object(n.NgModule)({declarations:[Je],imports:[o.CommonModule,ot,d.FormsModule],exports:[Je],providers:[]})],rt);var st=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},at=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ct=function(){function e(e){this.dotMessageService=e}return e.prototype.ngOnInit=function(){this.dotMessageService.getMessages(["editpage.layout.properties.header","editpage.layout.properties.footer"]).subscribe()},e}();st([Object(n.Input)(),at("design:type","function"==typeof(lt="undefined"!=typeof d.FormGroup&&d.FormGroup)&&lt||Object)],ct.prototype,"group",void 0),ct=st([Object(n.Component)({selector:"dot-layout-properties",template:i("zLjZ"),styles:[i("vRTQ")],encapsulation:n.ViewEncapsulation.None}),at("design:paramtypes",["function"==typeof(dt="undefined"!=typeof m.a&&m.a)&&dt||Object])],ct);var lt,dt,ht=i("9+eX"),pt=i("AP4T"),ut=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},gt=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ft=function(){function e(e,t,i){this.dotMessageService=e,this.paginatorService=t,this.siteService=i,this.selected=new n.EventEmitter,this.close=new n.EventEmitter}return e.prototype.ngOnInit=function(){var e=this;this.dotMessageService.getMessages(["editpage.layout.theme.header","editpage.layout.theme.search","editpage.layout.theme.no.records.found","dot.common.apply","dot.common.cancel"]).subscribe(),this.paginatorService.url="v1/themes",this.paginatorService.setExtraParams("hostId",this.siteService.currentSite.identifier),this.paginatorService.paginationPerPage=8,this.current=this.value,pt.a.fromEvent(this.searchInput.nativeElement,"keyup").debounceTime(500).subscribe(function(t){e.filterThemes(t.target.value)})},e.prototype.paginate=function(e){this.themes=this.paginatorService.getWithOffset(e.first),this.datagrid.first=e.first},e.prototype.siteChange=function(e){this.searchInput.nativeElement.value=null,this.paginatorService.setExtraParams("hostId",e.identifier),this.paginatorService.setExtraParams("searchParam",""),this.paginate({first:0})},e.prototype.selectTheme=function(e){this.current=e},e.prototype.apply=function(){this.selected.emit(this.current)},e.prototype.hideDialog=function(){this.close.emit(!1)},e.prototype.filterThemes=function(e){this.paginatorService.setExtraParams("searchParam",e),this.paginate({first:0})},e}();ut([Object(n.Input)(),gt("design:type","function"==typeof(mt="undefined"!=typeof ht.DotTheme&&ht.DotTheme)&&mt||Object)],ft.prototype,"value",void 0),ut([Object(n.Output)(),gt("design:type",Object)],ft.prototype,"selected",void 0),ut([Object(n.Output)(),gt("design:type",Object)],ft.prototype,"close",void 0),ut([Object(n.ViewChild)("searchInput"),gt("design:type","function"==typeof(yt="undefined"!=typeof n.ElementRef&&n.ElementRef)&&yt||Object)],ft.prototype,"searchInput",void 0),ut([Object(n.ViewChild)("dataGrid"),gt("design:type","function"==typeof(_t="undefined"!=typeof h.DataGrid&&h.DataGrid)&&_t||Object)],ft.prototype,"datagrid",void 0),ft=ut([Object(n.Component)({providers:[fe.b],selector:"dot-theme-selector",template:i("Jn6k"),styles:[i("/FB0")]}),gt("design:paramtypes",["function"==typeof(vt="undefined"!=typeof m.a&&m.a)&&vt||Object,"function"==typeof(bt="undefined"!=typeof fe.b&&fe.b)&&bt||Object,"function"==typeof(xt="undefined"!=typeof P.H&&P.H)&&xt||Object])],ft);var mt,yt,_t,vt,bt,xt,wt=i("d3xX"),Rt=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},St=function(){return function(){}}();St=Rt([Object(n.NgModule)({declarations:[ft],imports:[o.CommonModule,h.DropdownModule,h.ButtonModule,d.FormsModule,h.DialogModule,wt.a,h.InputTextModule,h.DataGridModule],exports:[ft],providers:[k]})],St);var Et=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Ot=function(){return function(){}}();Ot=Et([Object(n.NgModule)({declarations:[ct],imports:[o.CommonModule,ot,rt,h.OverlayPanelModule,h.ButtonModule,d.ReactiveFormsModule,St],exports:[ct],providers:[]})],Ot);var Ct=i("UvuA"),Mt=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},jt=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Pt=function(){function e(e){this.dotMessageService=e}return e.prototype.ngOnInit=function(){this.dotMessageService.getMessages(["editpage.layout.designer.header","editpage.layout.designer.footer"]).subscribe()},e.prototype.addGridBox=function(){this.editLayoutGrid.addBox()},e}();Mt([Object(n.ViewChild)("editLayoutGrid"),jt("design:type","function"==typeof(zt="undefined"!=typeof ae&&ae)&&zt||Object)],Pt.prototype,"editLayoutGrid",void 0),Mt([Object(n.Input)(),jt("design:type","function"==typeof(Gt="undefined"!=typeof d.FormGroup&&d.FormGroup)&&Gt||Object)],Pt.prototype,"group",void 0),Pt=Mt([Object(n.Component)({selector:"dot-layout-designer",template:i("UGZU"),styles:[i("WxZ1")]}),jt("design:paramtypes",["function"==typeof(Dt="undefined"!=typeof m.a&&m.a)&&Dt||Object])],Pt);var zt,Gt,Dt,kt=i("gJOy"),It=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Tt=function(){return function(){}}();Tt=It([Object(n.NgModule)({declarations:[W,Pt],imports:[h.ButtonModule,h.CheckboxModule,o.CommonModule,p.a,Oe,Fe,Ct.a,d.FormsModule,d.ReactiveFormsModule,h.InputTextModule,Ot,h.DialogModule,Ae,Se,kt.a,St,h.ToolbarModule,h.TooltipModule],exports:[W],providers:[E,E,f.a,y.a]})],Tt);var Lt=i("MZZS"),Bt=i("p9yO"),Ht=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Wt=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},At=function(){function e(e,t,i,o,n){this.dotMenuService=e,this.ngZone=t,this.dotGlobalMessageService=i,this.dotMessageService=o,this.dotPageStateService=n,o.getMessages(["dot.common.message.saved","dot.common.message.saving"]).subscribe()}return e.prototype.ngOnInit=function(){var e=this;this.url=this.dotMenuService.getDotMenuId("templates").map(function(t){return"c/portal/layout?ng=true&p_l_id="+t+"&p_p_id=templates&p_p_action=1&p_p_state=maximized&_templates_struts_action=%2Fext%2Ftemplates%2Fedit_template&_templates_cmd=edit&inode="+e.pageState.template.inode+"&r=0d618b02-f184-48fe-88f4-e98563ee6e9e"})},e.prototype.onLoad=function(e){var t=this;pt.a.fromEvent(e.target.contentWindow.document,"ng-event").subscribe(function(e){t.ngZone.run(function(){if("advanced-template-saved"===e.detail.name){t.dotGlobalMessageService.display(t.dotMessageService.get("dot.common.message.saved"));var i={url:t.pageState.page.pageURI};t.dotPageStateService.get(i).subscribe(function(e){return t.pageState.dotRenderedPageState=e})}else t.dotGlobalMessageService.loading(t.dotMessageService.get("dot.common.message.saving"))})})},e}();Ht([Object(n.Input)(),Wt("design:type","function"==typeof(Vt="undefined"!=typeof u.a&&u.a)&&Vt||Object)],At.prototype,"pageState",void 0),At=Ht([Object(n.Component)({selector:"dot-edit-layout-advanced",template:i("K0Re"),styles:[i("fdZH")]}),Wt("design:paramtypes",["function"==typeof(Ft="undefined"!=typeof Lt.a&&Lt.a)&&Ft||Object,"function"==typeof(Nt="undefined"!=typeof n.NgZone&&n.NgZone)&&Nt||Object,"function"==typeof(Ut="undefined"!=typeof C.a&&C.a)&&Ut||Object,"function"==typeof(Yt="undefined"!=typeof m.a&&m.a)&&Yt||Object,"function"==typeof(Xt="undefined"!=typeof Bt.a&&Bt.a)&&Xt||Object])],At);var Vt,Ft,Nt,Ut,Yt,Xt,$t=i("kv9j"),qt=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Zt=function(){return function(){}}();Zt=qt([Object(n.NgModule)({imports:[o.CommonModule,$t.a],exports:[At],declarations:[At],providers:[]})],Zt),i.d(t,"DotEditLayoutModule",function(){return Qt});var Jt=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Kt=[{component:c,path:""}],Qt=function(){return function(){}}();Qt=Jt([Object(n.NgModule)({declarations:[c],imports:[o.CommonModule,r.RouterModule.forChild(Kt),Tt,Zt],exports:[c]})],Qt)},"7q9X":function(e,t){e.exports='<dot-iframe [src]="url | async"></dot-iframe>\n'},"9+eX":function(e,t){},"9W7s":function(e,t,i){"use strict";i.d(t,"a",function(){return d});var o=i("rDdN"),n=i("/oeL"),r=i("CPp0"),s=i("fCCA"),a=this&&this.__assign||Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},c=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e){this.coreWebService=e}return e.prototype.getEdit=function(e,t){return this.get({url:e,mode:s.a.EDIT,viewAs:this.getDotEditPageViewAsParams(t)})},e.prototype.getPreview=function(e,t){return this.get({url:e,mode:s.a.PREVIEW,viewAs:this.getDotEditPageViewAsParams(t)})},e.prototype.getLive=function(e,t){return this.get({url:e,mode:s.a.LIVE,viewAs:this.getDotEditPageViewAsParams(t)})},e.prototype.get=function(e){var t=e.mode?{mode:this.getPageModeString(e.mode)}:{};return t=a({},t,e.viewAs?this.getOptionalViewAsParams(e.viewAs):{}),this.coreWebService.requestView({method:r.g.Get,url:"v1/page/render/"+e.url.replace(/^\//,""),params:t}).pluck("entity")},e.prototype.getDotEditPageViewAsParams=function(e){return e?{persona_id:this.getPropertyValue(e.persona,"identifier"),language_id:this.getPropertyValue(e.language,"id"),device_inode:this.getPropertyValue(e.device,"inode")}:null},e.prototype.getPropertyValue=function(e,t){return e?e[t]:null},e.prototype.getOptionalViewAsParams=function(e){var t=a({},e.persona_id?{"com.dotmarketing.persona.id":e.persona_id}:{},e.device_inode?{device_inode:e.device_inode}:{});return e.language_id&&(t.language_id=e.language_id),t},e.prototype.getPageModeString=function(e){var t={};return t[s.a.EDIT]="EDIT_MODE",t[s.a.PREVIEW]="PREVIEW_MODE",t[s.a.LIVE]="ADMIN_MODE",t[e]},e}();d=c([Object(n.Injectable)(),l("design:paramtypes",["function"==typeof(h="undefined"!=typeof o.e&&o.e)&&h||Object])],d);var h},Avot:function(e,t){e.exports='<dot-theme-selector *ngIf="themeDialogVisibility" [value]="currentTheme" (selected)="changeThemeHandler($event)" (close)="closeThemeDialog()">\n</dot-theme-selector>\n\n<form [formGroup]="form" (ngSubmit)="saveLayout()" novalidate class="dot-edit-layout__form">\n    <p-toolbar class="dot-edit-layout__toolbar">\n        <div class="ui-toolbar-group-right">\n            <input #templateName pInputText type="text" class="dot-edit-layout__toolbar-template-name" placeholder="{{ dotMessageService.get(\'editpage.layout.toolbar.template.name\') }} *"\n                *ngIf="saveAsTemplate" formControlName="title">\n            <p-checkbox class="dot-edit-layout__toolbar-save-template" label="{{ dotMessageService.get(\'editpage.layout.toolbar.save.template\') }}"\n                *ngIf="editTemplate && isLayout() && pageState.canCreateTemplate" binary="true" (onChange)="saveAsTemplateHandleChange($event);"></p-checkbox>\n            <button pButton secondary tiny type="button" (click)="onCancel($event)" label="{{ dotMessageService.get(\'dot.common.cancel\') }}"\n                class="dot-edit-layout__toolbar-action-cancel"></button>\n            <button pButton tiny type="submit" [disabled]="!isModelUpdated || !form.valid" label="{{ dotMessageService.get(\'editpage.layout.toolbar.action.save\') }}"\n                class="dot-edit-layout__toolbar-save"></button>\n            <dot-template-addtional-actions-menu *ngIf="!isLayout()" [inode]="pageState.template.inode"></dot-template-addtional-actions-menu>\n        </div>\n    </p-toolbar>\n    \n    <div class="dot-edit-layout__actions">\n        <dot-edit-page-info [pageState]="pageState"></dot-edit-page-info>\n        <div class="dot-edit__layout-actions-right">\n            <div *ngIf="!currentTheme;then permission else noPermission "></div>\n            <ng-template #permission>\n                <div class="dot-edit__layout-actions-themes" pTooltip="{{ dotMessageService.get(\'org.dotcms.frontend.content.submission.not.proper.permissions\') }}" tooltipPosition="left">\n                    <button pButton tiny link type="button" class="dot-edit-layout__toolbar-action-themes" icon="fa-paint-brush" label="{{ dotMessageService.get(\'editpage.layout.theme.button.label\') }}"\n                        (click)="themeDialogVisibility = !themeDialogVisibility" disabled=false>\n                    </button>\n                </div>\n            </ng-template>\n            <ng-template #noPermission>\n                <button pButton tiny link type="button" class="dot-edit-layout__toolbar-action-themes" icon="fa-paint-brush" label="{{ currentTheme?.name || \'Themes\' }}"\n                    (click)="themeDialogVisibility = !themeDialogVisibility">\n                </button>\n            </ng-template>\n            <dot-layout-properties [group]="form.get(\'layout\')"></dot-layout-properties>\n        </div>\n    </div>\n\n    <dot-layout-designer [group]="form.get(\'layout\')"></dot-layout-designer>\n</form>'},CLLy:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var o=i("/oeL"),n=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},r=function(){function e(){}return e.prototype.set=function(e){this.dotRenderedPageState=e},e.prototype.getAndClean=function(){var e=this.dotRenderedPageState;return this.dotRenderedPageState=null,e},e}();r=n([Object(o.Injectable)()],r)},CQ74:function(e,t){e.exports='<dot-searchable-dropdown\n    (change)="containerChange($event)"\n    (filterChange)="handleFilterChange($event)"\n    (pageChange)="handlePageChange($event)"\n    [data]="currentContainers"\n    [pageLinkSize]="5"\n    [rows]="paginationService.paginationPerPage"\n    [totalRecords]="paginationService.totalRecords"\n    [labelPropertyName]="[\'name\', \'parentPermissionable.hostname\']"\n    placeholder="{{ dotMessageService.get(\'editpage.container.add.label\') }}"\n    persistentPlaceholder="true"\n    [multiple]="multiple">\n</dot-searchable-dropdown>\n<ul class="container-selector__list">\n    <li *ngFor="let dotContainerColumnBox of data; let i = index" class="container-selector__list-item">\n        <button pButton icon="fa-trash" type="button" (click)="removeContainerItem(i)"></button>\n        {{ dotContainerColumnBox.container?.name }}\n    </li>\n</ul>\n'},CgDJ:function(e,t){e.exports='\x3c!--Advance template support was removed on commit https://github.com/dotCMS/core-web/pull/589--\x3e\n<dot-edit-layout-designer [pageState]="pageState | async"></dot-edit-layout-designer>\n\n'},"Dkp+":function(e,t,i){(e.exports=i("rP7Y")(!1)).push([e.i,":root{--color-background:#3a3847;--color-main:#c336e5;--color-main_mod:#d369ec;--color-main_rgb:195,54,229;--color-sec:#54428e;--color-sec_rgb:84,66,142}:host{-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex}.page-info__title{margin:0 4px 0 0;-ms-flex-item-align:center;-ms-grid-row-align:center;align-self:center;color:#0a0725;font-size:24px;font-weight:400}",""]),e.exports=e.exports.toString()},DoxT:function(e,t){e.exports='<div [ngGrid]="gridConfig" (onDragStop)="updateModel()" (onResizeStop)="updateModel()">\n    <div class="box" *ngFor="let gridBox of grid; let i = index" [(ngGridItem)]="gridBox.config">\n        <button class="box__remove" type="button" pButton icon="fa-close" (click)="onRemoveContainer(i)"></button>\n        <dot-container-selector (change)="updateContainers($event)" (remove)="onRemoveContainer(i)" [data]="gridBox.containers"\n            [multiple]="true">\n        </dot-container-selector>\n    </div>\n</div>'},EePd:function(e,t){e.exports='<p-overlayPanel appendTo="body" #overlay>\n    <div class="dot-sidebar-properties__radio-buttons-container">\n        <p-radioButton name="sidebarWidth" value="small" [label]="dotMessageService.get(\'editpage.layout.sidebar.width.small\')" [(ngModel)]="value.width"\n            (click)="changeSidebarSize()"></p-radioButton>\n        <p-radioButton name="sidebarWidth" value="medium" [label]="dotMessageService.get(\'editpage.layout.sidebar.width.medium\')"\n            [(ngModel)]="value.width" (click)="changeSidebarSize()"></p-radioButton>\n        <p-radioButton name="sidebarWidth" value="large" [label]="dotMessageService.get(\'editpage.layout.sidebar.width.large\')" [(ngModel)]="value.width"\n            (click)="changeSidebarSize()"></p-radioButton>\n    </div>\n</p-overlayPanel>\n\n<button pButton type="button" aria-label="dotMessageService.get(\'editpage.layout.sidebar.action.open\')" icon="fa-ellipsis-v"\n    (click)="overlay.toggle($event)"></button>'},Jdfx:function(e,t){e.exports='<dot-layout-properties-item\n    #propertyItemLeft\n    [ngModel]="value.location === \'left\'"\n    [label]="dotMessageService.get(\'editpage.layout.properties.sidebar.left\')"\n    class="property-item__sidebar-left"\n    (change)="setValue($event, \'left\')">\n</dot-layout-properties-item>\n<dot-layout-properties-item\n    #propertyItemRight\n    [ngModel]="value.location === \'right\'"\n    [label]="dotMessageService.get(\'editpage.layout.properties.sidebar.right\')"\n    class="property-item__sidebar-right"\n    (change)="setValue($event, \'right\')">\n</dot-layout-properties-item>\n'},Jn6k:function(e,t){e.exports='<p-dialog visible="true" [draggable]="false" [modal]="true" [dismissableMask]="true" (onHide)="hideDialog()" header="{{ dotMessageService.get(\'editpage.layout.theme.header\') }}">\n    <dot-site-selector #siteSelector (change)="siteChange($event)" [archive]="false"></dot-site-selector>\n    <div class="dot-theme-search-box">\n        <i class="fa fa-search searchable-dropdown__search-icon"></i>\n        <input #searchInput pInputText placeholder="{{ dotMessageService.get(\'editpage.layout.theme.search\') }}" type="text" class="searchable-dropdown__search-field"/>\n    </div>\n    <div class="dot-themes-container">\n        <p-dataGrid #dataGrid\n            [value]="themes | async"\n            [paginator]="true"\n            [rows]="paginatorService?.paginationPerPage"\n            [totalRecords]="paginatorService?.totalRecords"\n            [lazy]="true"\n            (onLazyLoad)="paginate($event)"\n            [emptyMessage]="dotMessageService.get(\'editpage.layout.theme.no.records.found\')"\n            [alwaysShowPaginator]="false">\n            <ng-template let-theme pTemplate="item" >\n                <div class="dot-theme-item ui-g-3" (click)="selectTheme(theme)" [ngClass]="{\'active\': theme.inode === current?.inode}">\n                    <svg *ngIf="!theme?.themeThumbnail" width="130" height="130"  viewBox="0 0 130 130" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path d="M130 121.56V7.5045C130 -0.439943 129.445 0.00450051 121.514 0.00450051H6.19998C-1.73165 0.00450051 0.209671 0.00450039 0.209671 7.5045V121.56C0.209671 129.505 -1.73165 130.005 6.19998 130.005H121.514C129.445 130.005 130 129.505 130 121.56ZM39.8678 75.8378L57.8943 97.5767L83.1313 65.0045L115.579 108.338H14.6308L39.8678 75.8378Z" transform="translate(0.789978 0.995499)"/>\n\n                    </svg>\n                    <img *ngIf="theme?.themeThumbnail" class="dot-theme-iteme__image" src="/dA/{{theme.themeThumbnail}}/130w/130h/thumbnail.png">\n                    <span class="dot-theme-item__name">{{ theme.name }}</span>\n                </div>\n            </ng-template>\n        </p-dataGrid>\n    </div>\n\n    <p-footer>\n        <button type="button" pButton secondary label="{{ dotMessageService.get(\'dot.common.cancel\') }}" class="cancel secondary" (click)="hideDialog()"></button>\n        <button type="button" pButton label="{{ dotMessageService.get(\'dot.common.apply\') }}" class="apply" [disabled]="value.inode === current.inode" (click)="apply()"></button>\n    </p-footer>\n</p-dialog>\n\n'},K0Re:function(e,t){e.exports='<dot-iframe [src]="url | async" (load)="onLoad($event)"></dot-iframe>'},LK4U:function(e,t,i){(e.exports=i("rP7Y")(!1)).push([e.i,":root{--color-background:#3a3847;--color-main:#c336e5;--color-main_mod:#d369ec;--color-main_rgb:195,54,229;--color-sec:#54428e;--color-sec_rgb:84,66,142}:host{background-color:#fff;position:relative;width:100%}:host ::ng-deep dot-container-selector{height:auto;margin-left:16px;margin-right:16px}:host ::ng-deep dot-container-selector dot-searchable-dropdown button{margin:8px 0}:host ::ng-deep dot-container-selector .container-selector__list{height:100%}:host ::ng-deep .dot-layout-designer__sidebar-properties{position:absolute}h6{-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#f1f3f4;display:-webkit-box;display:-ms-flexbox;display:flex;font-size:16px;font-weight:400;height:48px;margin:0;padding-left:16px}",""]),e.exports=e.exports.toString()},UGZU:function(e,t){e.exports='<div class="dot-layout-designer" [formGroup]="group">\n    <div class="dot-layout-designer__header" *ngIf="group.get(\'header\').value">{{ dotMessageService.get(\'editpage.layout.designer.header\') }}</div>\n    <div class="dot-layout-designer__main">\n        <div class="dot-layout-designer__sidebar--left" [ngClass]="\'dot-layout-designer__sidebar--\' + group.get(\'sidebar\').value[\'width\']"\n            *ngIf="group.get(\'sidebar\').value[\'location\'] === \'left\'">\n            <dot-edit-layout-sidebar formControlName="sidebar"></dot-edit-layout-sidebar>\n        </div>\n        <div class="dot-layout-designer__body">\n            <dot-action-button (click)="addGridBox()" class="dot-layout-designer__toolbar-add"></dot-action-button>\n            <div class="dot-layout-designer__grid-guides">\n                <dot-edit-layout-grid #editLayoutGrid formControlName="body"></dot-edit-layout-grid>\n            </div>\n        </div>\n        <div class="dot-layout-designer__sidebar--right" [ngClass]="\'dot-layout-designer__sidebar--\' + group.get(\'sidebar\').value[\'width\']"\n            *ngIf="group.get(\'sidebar\').value[\'location\'] === \'right\'">\n            <dot-edit-layout-sidebar formControlName="sidebar"></dot-edit-layout-sidebar>\n        </div>\n    </div>\n    <div class="dot-layout-designer__footer" *ngIf="group.get(\'footer\').value">{{ dotMessageService.get(\'editpage.layout.designer.footer\') }}</div>\n</div>'},UvuA:function(e,t,i){"use strict";var o=i("/oeL"),n=i("LUBl"),r=i("I3wY"),s=i("qbdv"),a=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e){this.dotMessageService=e}return e.prototype.ngOnInit=function(){var e=this;this.dotMessageService.getMessages(["template.action.additional.permissions","template.action.additional.history","template.action.additional.properties"]).subscribe(function(t){e.items=[{label:t["template.action.additional.properties"],routerLink:"template/"+e.inode+"/properties"},{label:t["template.action.additional.permissions"],routerLink:"template/"+e.inode+"/permissions"},{label:t["template.action.additional.history"],routerLink:"template/"+e.inode+"/history"}]})},e}();a([Object(o.Input)(),c("design:type",String)],l.prototype,"inode",void 0),l=a([Object(o.Component)({selector:"dot-template-addtional-actions-menu",template:i("nXq2")}),c("design:paramtypes",["function"==typeof(d="undefined"!=typeof r.a&&r.a)&&d||Object])],l);var d,h=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},p=function(){return function(){}}();p=h([Object(o.NgModule)({declarations:[l],imports:[n.MenuModule,n.ButtonModule,s.CommonModule],exports:[l],providers:[r.a]})],p);var u=i("MZZS"),g=i("gpl+"),f=i("XFcD"),m=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},y=function(){return function(){}}();y=m([Object(o.NgModule)({declarations:[f.a],imports:[g.a,s.CommonModule],exports:[f.a],providers:[u.a]})],y),i.d(t,"a",function(){return v});var _=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},v=function(){return function(){}}();v=_([Object(o.NgModule)({declarations:[],imports:[p,y],exports:[f.a,l],providers:[]})],v)},W69s:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var o=i("/oeL"),n=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},r=function(){function e(){}return e.prototype.set=function(e){this.containers=e},e.prototype.get=function(e){return this.containers[e]?this.containers[e].container:null},e}();r=n([Object(o.Injectable)()],r)},WxZ1:function(e,t,i){(e.exports=i("rP7Y")(!1)).push([e.i,":root{--color-background:#3a3847;--color-main:#c336e5;--color-main_mod:#d369ec;--color-main_rgb:195,54,229;--color-sec:#54428e;--color-sec_rgb:84,66,142}:host{display:-webkit-box;display:-ms-flexbox;display:flex}.dot-layout-designer{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.dot-layout-designer,.dot-layout-designer__main{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.dot-layout-designer__main{margin:0 16px}.dot-layout-designer__footer,.dot-layout-designer__header,[class^=dot-layout-designer__sidebar]{-webkit-box-align:center;-ms-flex-align:center;align-items:center;background:#ecedee;color:#7e7a86;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-negative:0;flex-shrink:0;font-size:24px;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}[class^=dot-layout-designer__sidebar]{-webkit-box-align:normal;-ms-flex-align:normal;align-items:normal}[class^=dot-layout-designer__sidebar] dot-container-selector{width:100%}.dot-layout-designer__sidebar--left,.dot-layout-designer__sidebar--right{border:1px solid #c5c5c5}.dot-layout-designer__sidebar--small{width:200px}.dot-layout-designer__sidebar--medium{width:250px}.dot-layout-designer__sidebar--large{width:300px}.dot-layout-designer__sidebar--left{margin-right:16px}.dot-layout-designer__sidebar--right{margin-left:16px}.dot-layout-designer__footer,.dot-layout-designer__header{height:80px;margin:0 8px 16px}.dot-layout-designer__body{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;border:1px solid #c5c5c5;padding:8px}.dot-layout-designer__body::ng-deep .action-button--no-label .ui-button.ui-button-icon-only{height:36px;width:36px;font-size:12px}.dot-layout-designer__toolbar-add{-ms-flex-item-align:end;align-self:flex-end;margin-bottom:8px;width:36px}.dot-layout-designer__grid-guides{background:repeating-linear-gradient(-90deg,transparent,transparent 8px,#ecedee 0,#ecedee 8.33333%);-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;margin-right:-8px}",""]),e.exports=e.exports.toString()},XFcD:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var o=i("/oeL"),n=i("BkNc"),r=i("MZZS"),s=i("AP4T"),a=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e,t){this.route=e,this.dotMenuService=t}return e.prototype.ngOnInit=function(){this.url=this.route.params.combineLatest(this.dotMenuService.getDotMenuId("templates")).switchMap(function(e){var t=e[0].tabName,i=e[0].id,o=e[1];return s.a.of("c/portal/layout?p_l_id="+o+"&p_p_id=templates&p_p_action=1&p_p_state=maximized&p_p_mode=view&_templates_struts_action=%2Fext%2Ftemplates%2Fedit_template&_templates_cmd=edit&inode="+i+"&drawed=false&selectedTab="+t)})},e}();l=a([Object(o.Component)({selector:"dot-legacy-addtional-actions",template:i("7q9X")}),c("design:paramtypes",["function"==typeof(d="undefined"!=typeof n.ActivatedRoute&&n.ActivatedRoute)&&d||Object,"function"==typeof(h="undefined"!=typeof r.a&&r.a)&&h||Object])],l);var d,h},dofU:function(e,t){e.exports='<svg width="20" height="20" viewBox="0 0 20 20" class="property-item__icon"  [class.property-item__icon--selected]="value" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g id="Canvas" fill="none">\n        <g id="icon">\n            <g id="Rectangle 2">\n                <rect x="1" y="1" width="18" height="18" rx="1" stroke-width="2" stroke="#444444" />\n            </g>\n            <g id="Rectangle 2.1">\n                <path d="M 0 0L 2 0L 2 20L 0 20L 0 0Z" transform="matrix(1 1.74846e-07 -1.74846e-07 1 12 0)" fill="#444444" />\n            </g>\n        </g>\n    </g>\n</svg>\n\n<span class="property-item__label">{{ label }}</span>\n'},fCCA:function(e,t,i){"use strict";i.d(t,"a",function(){return o});var o;!function(e){e[e.EDIT=1]="EDIT",e[e.PREVIEW=2]="PREVIEW",e[e.LIVE=3]="LIVE"}(o||(o={}))},fdZH:function(e,t,i){(e.exports=i("rP7Y")(!1)).push([e.i,"",""]),e.exports=e.exports.toString()},fhyG:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var o=i("CPp0"),n=i("/oeL"),r=i("rDdN"),s=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e){this.coreWebService=e}return e.prototype.save=function(e,t){return this.coreWebService.requestView({body:t,method:o.g.Post,url:"v1/page/"+e+"/layout"}).pluck("entity")},e}();c=s([Object(n.Injectable)(),a("design:paramtypes",["function"==typeof(l="undefined"!=typeof r.e&&r.e)&&l||Object])],c);var l},fyp8:function(e,t){e.exports='<h6>{{ dotMessageService.get(\'editpage.layout.designer.sidebar\') }}</h6>\n<dot-sidebar-properties (change)="updateAndPropagate()" [(ngModel)]="value" class="dot-layout-designer__sidebar-properties"></dot-sidebar-properties>\n<dot-container-selector (change)="updateAndPropagate($event)" [data]="containers"></dot-container-selector>\n'},gJOy:function(e,t,i){"use strict";var o=i("qbdv"),n=i("/oeL"),r=i("nC0h"),s=i("miw3"),a=i("I3wY"),c=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(){}return e.prototype.copy=function(e){var t=document.createElement("textarea");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.opacity="0",t.value=e,document.body.appendChild(t),t.select();var i;return new Promise(function(e,o){try{e(i=document.execCommand("copy"))}catch(e){o(i)}document.body.removeChild(t)})},e}();d=c([Object(n.Injectable)(),l("design:paramtypes",[])],d);var h=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,i){this.dotClipboardUtil=e,this.dotGlobalMessageService=t,this.dotMessageService=i}return e.prototype.ngOnInit=function(){this.dotMessageService.getMessages(["dot.common.message.pageurl.copied.clipboard","dot.common.message.pageurl.copied.clipboard.error","editpage.toolbar.page.cant.edit","editpage.toolbar.page.locked.by.user"]).subscribe()},e.prototype.blinkLockMessage=function(){var e=this,t="page-info__locked-by-message--blink";this.lockedPageMessage.nativeElement.classList.add(t),setTimeout(function(){e.lockedPageMessage.nativeElement.classList.remove(t)},500)},e.prototype.copyUrlToClipboard=function(){var e=this;this.dotClipboardUtil.copy(this.pageState.page.pageURI).then(function(){e.dotGlobalMessageService.display(e.dotMessageService.get("dot.common.message.pageurl.copied.clipboard"))}).catch(function(){e.dotGlobalMessageService.error(e.dotMessageService.get("dot.common.message.pageurl.copied.clipboard.error"))})},e}();h([Object(n.Input)(),p("design:type","function"==typeof(g="undefined"!=typeof r.a&&r.a)&&g||Object)],u.prototype,"pageState",void 0),h([Object(n.ViewChild)("lockedPageMessage"),p("design:type","function"==typeof(f="undefined"!=typeof n.ElementRef&&n.ElementRef)&&f||Object)],u.prototype,"lockedPageMessage",void 0),u=h([Object(n.Component)({selector:"dot-edit-page-info",template:i("pT9R"),styles:[i("Dkp+")]}),p("design:paramtypes",["function"==typeof(m="undefined"!=typeof d&&d)&&m||Object,"function"==typeof(y="undefined"!=typeof s.a&&s.a)&&y||Object,"function"==typeof(_="undefined"!=typeof a.a&&a.a)&&_||Object])],u);var g,f,m,y,_,v=i("LUBl");i.d(t,"a",function(){return x});var b=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},x=function(){return function(){}}();x=b([Object(n.NgModule)({imports:[o.CommonModule,v.ButtonModule],exports:[u],declarations:[u],providers:[d]})],x)},iqGV:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var o=i("/oeL"),n=i("rDdN"),r=i("CPp0"),s=i("GROE"),a=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e){this.coreWebService=e}return e.prototype.get=function(){return this.coreWebService.requestView({method:r.g.Get,url:"v1/workflow/schemes"}).pluck("entity")},e.prototype.getSystem=function(){return this.get().pipe(Object(s.switchMap)(function(e){return e.filter(function(e){return e.system})}),Object(s.take)(1))},e.prototype.getContentWorkflowActions=function(e){return this.coreWebService.requestView({method:r.g.Get,url:"v1/workflow/contentlet/"+e+"/actions"}).pluck("entity")},e.prototype.fireWorkflowAction=function(e,t){return this.coreWebService.requestView({method:r.g.Put,url:"v1/workflow/actions/"+t+"/fire?inode="+e}).pluck("entity")},e}();l=a([Object(o.Injectable)(),c("design:paramtypes",["function"==typeof(d="undefined"!=typeof n.e&&n.e)&&d||Object])],l);var d},nC0h:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var o=i("fCCA"),n=function(){function e(e,t){this._user=e,this.dotRenderedPage=t;var i=!!t.page.lockedBy,n=!!i&&t.page.lockedBy!==e.userId,r=t.viewAs.mode.replace("_MODE",""),s="ADMIN"===r?o.a.LIVE:o.a[r];this._state={locked:i,lockedByAnotherUser:n,mode:s}}return Object.defineProperty(e.prototype,"canCreateTemplate",{get:function(){return this.dotRenderedPage.canCreateTemplate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"containers",{get:function(){return this.dotRenderedPage.containers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"html",{get:function(){return this.dotRenderedPage.page.rendered},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){return this.dotRenderedPage.layout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"page",{get:function(){return this.dotRenderedPage.page},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"template",{get:function(){return this.dotRenderedPage.template},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewAs",{get:function(){return this.dotRenderedPage.viewAs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"user",{get:function(){return this._user},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dotRenderedPageState",{set:function(e){this.dotRenderedPage=e},enumerable:!0,configurable:!0}),e}()},nXq2:function(e,t){e.exports='<p-menu appendTo="body" #menu popup="popup" [model]="items"></p-menu>\n<button type="button" pButton icon="fa-ellipsis-v" (click)="menu.toggle($event)"></button>\n'},p9TT:function(e,t,i){(e.exports=i("rP7Y")(!1)).push([e.i,":root{--color-background:#3a3847;--color-main:#c336e5;--color-main_mod:#d369ec;--color-main_rgb:195,54,229;--color-sec:#54428e;--color-sec_rgb:84,66,142}:host{display:block;width:100%}:host ::ng-deep dot-container-selector{height:auto;margin-left:16px;margin-right:16px}:host ::ng-deep dot-container-selector dot-searchable-dropdown button{margin:8px 0}:host ::ng-deep dot-container-selector dot-searchable-dropdown button,:host ::ng-deep dot-container-selector dot-searchable-dropdown button:hover{box-shadow:none}:host ::ng-deep dot-container-selector .container-selector__list{height:140px;margin-top:8px}.box{background:linear-gradient(180deg,#f1f3f4 0,#f1f3f4 48px,#fff 0,#fff);border:1px solid #c5c5c5;height:206px}.box__remove{margin:8px 16px;position:absolute;right:0}",""]),e.exports=e.exports.toString()},p9yO:function(e,t,i){"use strict";i.d(t,"a",function(){return u});var o=i("rDdN"),n=i("nC0h"),r=i("9W7s"),s=i("AP4T"),a=i("/oeL"),c=i("pRBB"),l=i("TO51"),d=i("GROE"),h=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,i){this.dotRenderHTMLService=e,this.dotContentletLockerService=t,this.loginService=i,this.reload$=new l.Subject}return e.prototype.set=function(e,t,i){var o=this,r=this.getLockMode(e.workingInode,t.locked),a={url:e.pageURI,mode:t.mode,viewAs:this.dotRenderHTMLService.getDotEditPageViewAsParams(i)},c=void 0!==t.mode?this.dotRenderHTMLService.get(a):s.a.of(null);return r.mergeMap(function(){return c.map(function(e){return new n.a(o.loginService.auth.loginAsUser||o.loginService.auth.user,e)})})},e.prototype.reload=function(e){var t=this;this.get(e).pipe(Object(d.take)(1)).subscribe(function(e){t.reload$.next(e)})},e.prototype.get=function(e){var t=this;return"string"==typeof e&&(e={url:e}),this.dotRenderHTMLService.get(e).pipe(Object(d.map)(function(e){return new n.a(t.loginService.auth.loginAsUser||t.loginService.auth.user,e)}))},e.prototype.getLockMode=function(e,t){return!0===t?this.dotContentletLockerService.lock(e).pluck("message"):!1===t?this.dotContentletLockerService.unlock(e).pluck("message"):s.a.of(null)},e}();u=h([Object(a.Injectable)(),p("design:paramtypes",["function"==typeof(g="undefined"!=typeof r.a&&r.a)&&g||Object,"function"==typeof(f="undefined"!=typeof c.a&&c.a)&&f||Object,"function"==typeof(m="undefined"!=typeof o.B&&o.B)&&m||Object])],u);var g,f,m},pRBB:function(e,t,i){"use strict";i.d(t,"a",function(){return c});var o=i("rDdN"),n=i("/oeL"),r=i("CPp0"),s=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e){this.coreWebService=e}return e.prototype.lock=function(e){return this.coreWebService.requestView({method:r.g.Put,url:"content/lock/inode/"+e}).pluck("bodyJsonObject")},e.prototype.unlock=function(e){return this.coreWebService.requestView({method:r.g.Put,url:"content/unlock/inode/"+e}).pluck("bodyJsonObject")},e}();c=s([Object(n.Injectable)(),a("design:paramtypes",["function"==typeof(l="undefined"!=typeof o.e&&o.e)&&l||Object])],c);var l},pT9R:function(e,t){e.exports='\n<h2 class="page-info__title">{{ pageState.page.title }}</h2>\n<button pButton icon="fa-clone" class="page-info__copy-url" (click)="copyUrlToClipboard($event)"></button>\n\n'},qtEl:function(e,t,i){(e.exports=i("rP7Y")(!1)).push([e.i,":host{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}",""]),e.exports=e.exports.toString()},vRTQ:function(e,t,i){(e.exports=i("rP7Y")(!1)).push([e.i,":root{--color-background:#3a3847;--color-main:#c336e5;--color-main_mod:#d369ec;--color-main_rgb:195,54,229;--color-sec:#54428e;--color-sec_rgb:84,66,142}.dot-layout-properties__overlayPanel .ui-overlaypanel-content{padding:8px 0}",""]),e.exports=e.exports.toString()},xwG8:function(e,t,i){(e.exports=i("rP7Y")(!1)).push([e.i,":root{--color-background:#3a3847;--color-main:#c336e5;--color-main_mod:#d369ec;--color-main_rgb:195,54,229;--color-sec:#54428e;--color-sec_rgb:84,66,142}:host{background-color:#fafafa;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-negative:0;flex-shrink:0;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;min-height:100%;min-width:750px;width:100%}dot-layout-designer{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.dot-edit-layout__actions{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:16px}.dot-edit-layout__actions,.dot-edit-layout__form{display:-webkit-box;display:-ms-flexbox;display:flex}.dot-edit-layout__form{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.dot-edit-layout__toolbar{background-color:#fff;display:block;position:relative;z-index:1}.dot-edit-layout__toolbar ::ng-deep .ui-toolbar{border-bottom:1px solid #ecedee;height:48px;padding-left:0}.dot-edit-layout__toolbar-action-cancel{margin-right:8px}.dot-edit__layout-actions-right .dot-edit__layout-actions-themes{display:inline}",""]),e.exports=e.exports.toString()},yqMY:function(e,t,i){(e.exports=i("rP7Y")(!1)).push([e.i,":root{--color-background:#3a3847;--color-main:#c336e5;--color-main_mod:#d369ec;--color-main_rgb:195,54,229;--color-sec:#54428e;--color-sec_rgb:84,66,142}:host{display:-webkit-box;display:-ms-flexbox;display:flex;cursor:pointer;-ms-flex-line-pack:center;align-content:center;padding:8px 16px}:host:hover{background-color:#ecedee}:host.property-item__footer svg{-webkit-transform:rotate(90deg);transform:rotate(90deg)}:host.property-item__sidebar-left svg{-webkit-transform:rotate(180deg);transform:rotate(180deg)}:host.property-item__header svg{-webkit-transform:rotate(270deg);transform:rotate(270deg)}.property-item__icon--selected rect{stroke:#c336e5;stroke:var(--color-main);fill:rgba(195,54,229,.2);fill:rgba(var(--color-main_rgb),.2)}.property-item__icon--selected path{fill:#c336e5;fill:var(--color-main)}.property-item__label{padding-left:8px;-ms-flex-item-align:center;-ms-grid-row-align:center;align-self:center}",""]),e.exports=e.exports.toString()},zLjZ:function(e,t){e.exports='<p-overlayPanel #op appendTo="body" styleClass="dot-layout-properties__overlayPanel">\n    <div [formGroup]="group">\n        <dot-layout-properties-item [label]="dotMessageService.get(\'editpage.layout.properties.header\')"\n                                    class="property-item__header"\n                                    formControlName="header">\n        </dot-layout-properties-item>\n\n        <dot-layout-properties-item [label]="dotMessageService.get(\'editpage.layout.properties.footer\')"\n                                    class="property-item__footer"\n                                    formControlName="footer">\n        </dot-layout-properties-item>\n        <div>\n            <dot-layout-property-sidebar formControlName="sidebar"></dot-layout-property-sidebar>\n        </div>\n    </div>\n</p-overlayPanel>\n\n<button pButton type="button" icon="fa-th-large" (click)="op.toggle($event)"></button>\n'}});